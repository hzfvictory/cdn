<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ä½¿ç”¨keepAliveé‡åˆ°çš„å‘ | hfzvictory</title><meta name="description" content="ä½¿ç”¨keepAliveé‡åˆ°çš„å‘ [[toc]] ä»‹ç»keep-aliveæ˜¯vueçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚å®ƒä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚å®ƒæä¾›äº†includeä¸excludeå±æ€§ï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°è¿›è¡Œç¼“å­˜ï¼Œå…¶ä¸­excludeçš„ä¼˜å…ˆçº§æ¯”includeé«˜ï¼Œmaxæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚ keep-aliveè¯¦è§£æ–‡æ¡£ ä½¿ç”¨ ke"><meta name="keywords" content="å’ŒæŒ¯å³°åšå®¢ï¼Œwebå‰ç«¯ï¼Œnodeå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œhzfvictory"><meta name="author" content="hfzvictory,feng960106@163.com"><meta name="copyright" content="hfzvictory"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ä½¿ç”¨keepAliveé‡åˆ°çš„å‘"><meta name="twitter:description" content="ä½¿ç”¨keepAliveé‡åˆ°çš„å‘ [[toc]] ä»‹ç»keep-aliveæ˜¯vueçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚å®ƒä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚å®ƒæä¾›äº†includeä¸excludeå±æ€§ï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°è¿›è¡Œç¼“å­˜ï¼Œå…¶ä¸­excludeçš„ä¼˜å…ˆçº§æ¯”includeé«˜ï¼Œmaxæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚ keep-aliveè¯¦è§£æ–‡æ¡£ ä½¿ç”¨ ke"><meta name="twitter:image" content="https://tva1.sinaimg.cn/large/007S8ZIlly1gegal5ikmoj30u00xpe81.jpg"><meta property="og:type" content="article"><meta property="og:title" content="ä½¿ç”¨keepAliveé‡åˆ°çš„å‘"><meta property="og:url" content="http://file.jing999.cn/2020/05/25/workspace/Frame/vue/keep-alive/"><meta property="og:site_name" content="hfzvictory"><meta property="og:description" content="ä½¿ç”¨keepAliveé‡åˆ°çš„å‘ [[toc]] ä»‹ç»keep-aliveæ˜¯vueçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚å®ƒä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚å®ƒæä¾›äº†includeä¸excludeå±æ€§ï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°è¿›è¡Œç¼“å­˜ï¼Œå…¶ä¸­excludeçš„ä¼˜å…ˆçº§æ¯”includeé«˜ï¼Œmaxæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚ keep-aliveè¯¦è§£æ–‡æ¡£ ä½¿ç”¨ ke"><meta property="og:image" content="https://tva1.sinaimg.cn/large/007S8ZIlly1gegal5ikmoj30u00xpe81.jpg"><meta property="article:published_time" content="2020-05-25T00:00:00.000Z"><meta property="article:modified_time" content="2020-11-12T07:29:29.280Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://file.jing999.cn/2020/05/25/workspace/Frame/vue/keep-alive/"><link rel="prev" title="keep-aliveæºç åˆ†æ" href="http://file.jing999.cn/2020/06/02/workspace/Frame/vue/source-code/keep-alive/"><link rel="next" title="vue3.oæºç åˆ†æ" href="http://file.jing999.cn/2020/03/17/workspace/Frame/vue/next/reactivity/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: {"languages":{"author":"ä½œè€…: hfzvictory","link":"é“¾æ¥: ","source":"æ¥æº: hfzvictory","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: false,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://ae01.alicdn.com/kf/H9ae3136bf5e440239fa2c611632fbd09H.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">104</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">18</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">99</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/archives"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/todos"><i class="fa-fw fa fa-battery-three-quarters"></i><span> Todos</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bicycle" aria-hidden="true"></i><span> å–œå¥½</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/movies"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li><li><a class="site-page" href="/photos"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ä»‹ç»"><span class="toc-number">1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#includeå’Œexclude"><span class="toc-number">2.</span> <span class="toc-text">includeå’Œexclude</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#includeå’Œexcludeæ— æ•ˆé—®é¢˜"><span class="toc-number">2.1.</span> <span class="toc-text">includeå’Œexcludeæ— æ•ˆé—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†"><span class="toc-number">3.</span> <span class="toc-text">ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scrollBehavior"><span class="toc-number">4.</span> <span class="toc-text">scrollBehavior</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°"><span class="toc-number">5.</span> <span class="toc-text">å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®ç°æ–¹å¼ä¸€"><span class="toc-number">5.1.</span> <span class="toc-text">å®ç°æ–¹å¼ä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®ç°æ–¹å¼äºŒ"><span class="toc-number">5.2.</span> <span class="toc-text">å®ç°æ–¹å¼äºŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®ç°æ–¹å¼ä¸‰"><span class="toc-number">5.3.</span> <span class="toc-text">å®ç°æ–¹å¼ä¸‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒæ–‡æ¡£"><span class="toc-number">6.</span> <span class="toc-text">å‚è€ƒæ–‡æ¡£</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div class="post-bg" id="nav" style="background-image: url(https://tva1.sinaimg.cn/large/007S8ZIlly1gegal5ikmoj30u00xpe81.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">hfzvictory</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/archives"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/todos"><i class="fa-fw fa fa-battery-three-quarters"></i><span> Todos</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bicycle" aria-hidden="true"></i><span> å–œå¥½</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/movies"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li><li><a class="site-page" href="/photos"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">ä½¿ç”¨keepAliveé‡åˆ°çš„å‘</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="å‘è¡¨äº 2020-05-25 00:00:00"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2020-05-25</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="æ›´æ–°äº 2020-11-12 07:29:29"><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2020-11-12</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/FE%E6%A1%86%E6%9E%B6/">FEæ¡†æ¶</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/FE%E6%A1%86%E6%9E%B6/Vue/">Vue</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/FE%E6%A1%86%E6%9E%B6/Vue/%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91/">é¡¹ç›®è¸©å‘</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/FE%E6%A1%86%E6%9E%B6/Vue/%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91/keepAlive%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/">keepAliveé‡åˆ°çš„å‘</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>å­—æ•°æ€»è®¡:</span><span class="word-count">3.4k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>é˜…è¯»æ—¶é•¿: 13 åˆ†é’Ÿ</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p><strong class='old-blog'>ä½¿ç”¨keepAliveé‡åˆ°çš„å‘</strong></p>
<p>[[toc]]</p>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p><code>keep-alive</code>æ˜¯<code>vue</code>çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚å®ƒä¼šç¼“å­˜ä¸æ´»åŠ¨çš„<strong>ç»„ä»¶å®ä¾‹</strong>ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚å®ƒæä¾›äº†<code>include</code>ä¸<code>exclude</code>å±æ€§ï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°è¿›è¡Œç¼“å­˜ï¼Œå…¶ä¸­excludeçš„ä¼˜å…ˆçº§æ¯”includeé«˜ï¼Œmaxæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚</p>
<p><a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noopener">keep-aliveè¯¦è§£æ–‡æ¡£</a></p>
<p>ä½¿ç”¨ <code>keep-alive</code>çš„è¯ä¼šå¢åŠ ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œ <code>activated</code> å’Œ <code>deactivated</code></p>
<p>ä¸‹é¢çš„æ–‡ç« æˆ‘æ˜¯<code>keep-alive</code>é…åˆ<code>vue-router</code>ä¸€å—ä½¿ç”¨çš„ï¼Œå½“å‰<code>keep-alive</code>ä¹Ÿå¯ä»¥ç¼“å­˜å•ä¸ªç»„ä»¶ï¼Œåœ¨è¿™é‡Œå°±ä¸å¤šèµ˜è¿°ã€‚</p>
<h2 id="includeå’Œexclude"><a href="#includeå’Œexclude" class="headerlink" title="includeå’Œexclude"></a>includeå’Œexclude</h2><p><code>include</code> å’Œ <code>exclude</code> prop å…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°ç¼“å­˜ã€‚äºŒè€…éƒ½å¯ä»¥ç”¨<code>é€—å·åˆ†éš”å­—ç¬¦ä¸²</code>ã€<code>æ­£åˆ™è¡¨è¾¾å¼</code>æˆ–ä¸€ä¸ª<code>æ•°ç»„</code>æ¥è¡¨ç¤ºè¯¦ç»†å¥æ–‡æ¡£</p>
<p>æˆ‘è¿™é‡Œä½¿ç”¨çš„<code>vuex</code>é…åˆæ•°ç»„åŠ¨æ€æ§åˆ¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;keep-alive :include=<span class="string">"includes"</span> exclude=<span class="string">""</span> :max=<span class="string">"10"</span> &gt;</span><br><span class="line">   &lt;router-view/&gt;</span><br><span class="line">&lt;<span class="regexp">/keep-alive&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp"> export default &#123;</span></span><br><span class="line"><span class="regexp">	computed: &#123;</span></span><br><span class="line"><span class="regexp">	  includes() &#123;</span></span><br><span class="line"><span class="regexp">	     return state =&gt; state.router.includes</span></span><br><span class="line"><span class="regexp">	   &#125;</span></span><br><span class="line"><span class="regexp">	&#125;,</span></span><br><span class="line"><span class="regexp">	methods: &#123;</span></span><br><span class="line"><span class="regexp">     changeStoreIncludes() &#123;</span></span><br><span class="line"><span class="regexp">       this.$store.commit('changeIncludes', 'tableLists');</span></span><br><span class="line"><span class="regexp">     &#125;</span></span><br><span class="line"><span class="regexp">   &#125;  </span></span><br><span class="line"><span class="regexp"> &#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// vuex</span></span><br><span class="line">mutations: &#123;</span><br><span class="line">	changeIncludes(state, payload) &#123;</span><br><span class="line">	  state.includes = payload</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="includeå’Œexcludeæ— æ•ˆé—®é¢˜"><a href="#includeå’Œexcludeæ— æ•ˆé—®é¢˜" class="headerlink" title="includeå’Œexcludeæ— æ•ˆé—®é¢˜"></a>includeå’Œexcludeæ— æ•ˆé—®é¢˜</h3><p>ä½¿ç”¨<code>include/exclude</code> å±æ€§éœ€è¦ç»™æ‰€æœ‰<code>vueç±»çš„name</code>èµ‹å€¼ï¼ˆæ³¨æ„ä¸æ˜¯ç»™routeçš„nameèµ‹å€¼ï¼‰ï¼Œå¦åˆ™ <code>include/exclude</code>ä¸ç”Ÿæ•ˆ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"> name:<span class="string">'TableList'</span>, <span class="comment">// include æˆ– excludeæ‰€ä½¿ç”¨çš„name</span></span><br><span class="line"> data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†"><a href="#ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†" class="headerlink" title="ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†"></a>ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">enter-active-class</span>=<span class="string">"animated zoomInLeft"</span> <span class="attr">leave-active-class</span>=<span class="string">"animated zoomOutRight"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"$route.meta.keepAlive"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">enter-active-class</span>=<span class="string">"animated zoomInLeft"</span> <span class="attr">leave-active-class</span>=<span class="string">"animated zoomOutRight"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">"!$route.meta.keepAlive"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åšçš„è¯æ›´åŠ ç®€å•æ˜äº†ï¼Œè€Œä¸”é…åˆåŠ¨ç”»æ›´æ­ï¼Œä¸ç”¨å†<code>vue</code>ç»„ä»¶é‡Œé¢å£°æ˜<code>name</code>ï¼Œä½†æ˜¯è¦åœ¨<code>route</code>çš„<code>meta</code>é‡Œé¢æ·»åŠ  <code>{keepAlive:true}</code>å­—æ®µï¼Œå¦‚æœè·¯ç”±æ˜¯åå°æ§åˆ¶çš„è¯ï¼Œå‰ç«¯è°ƒè¯•å°±æ¯”è¾ƒé¸¡è‚‹ã€‚</p>
<p><strong>æš´éœ²çš„é—®é¢˜</strong></p>
<p><strong>é—®é¢˜1ï¼š</strong></p>
<p>ä½ç½®å…¬ç”¨çš„é—®é¢˜ï¼Œå½“å‰åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µé¢çš„æ—¶å€™ï¼Œä½¿ç”¨è·¯ç”±å›åˆ°åˆ—è¡¨ä¹Ÿæ—¶å€™ï¼Œä¼šå‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µã€‚ï¼ˆå¦‚æœä½¿ç”¨æµè§ˆå™¨çš„å›é€€æ–¹å¼ï¼Œä¸ä¼šå‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µã€‚ï¼‰</p>
<blockquote>
<p><strong>å¯¹äºè¿™ä¸ªä½ç½®å…¬ç”¨çš„æƒ…å†µï¼Œæˆ‘æ˜¯ä¸€å¤´é›¾æ°´ï¼ŒæœŸå¾…å¤§ä½¬è§£ç­”</strong> ğŸ¤ï¼Œæœ‰å‡ ç‚¹è¦è¯´çš„ä¸çŸ¥å¯¹é”™ï¼Œå¾…æ±‚è¯ã€‚</p>
<ul>
<li><strong>å¤šé¡µé¢</strong></li>
</ul>
<ol>
<li>å¦‚æœæœ‰æ•°æ®è¯·æ±‚çš„è¯ï¼Œæµè§ˆå™¨å°†ä¼šæŠŠé¡µé¢ç½®é¡¶ï¼Ÿ</li>
<li>å¦‚æœæ˜¯é™æ€é¡µé¢çš„è¯ï¼Œæµè§ˆå™¨ä¼šæ»šåˆ°ä½ ä¹‹å‰æ»šåŠ¨çš„åœ°æ–¹ï¼Ÿ</li>
<li>ä¸Šé¢ä»…ä»…æ˜¯ä½¿ç”¨çš„æµè§ˆå™¨çš„è·³è½¬è¡Œä¸ºï¼Œå¦‚æœä½¿ç”¨hrefæˆ–è€…è·¯ç”±å°è£…ä¸€äº›æ–¹æ³•ï¼Œåˆ™éƒ½ä¼šç½®é¡¶ï¼Ÿ</li>
</ol>
<ul>
<li><strong>æ±‚è¯ä¸Šé¢ ğŸ¤</strong></li>
</ul>
<ol start="4">
<li>åŸºäºSPAæ¨¡å¼å¼€å‘ï¼Œæ‰€ä»¥é¡µé¢ä»…æœ‰ä¸€ä¸ªï¼Œå®ç°é¡µé¢åˆ‡æ¢æ˜¯åˆ©ç”¨å“ˆå¸Œä¸ç»„ä»¶çš„æ˜ å°„å…³ç³»ï¼Œvue-routeræ˜¯é€šè¿‡å“ˆå¸Œæ¥æ¨¡æ‹Ÿå®Œæ•´çš„urlï¼Œä½†æ˜¯å¯¹äºé¡µé¢æ¥è¯´ä»æ˜¯ä¸€ä¸ªurlï¼Œæ‰€ä»¥åœ¨ä»»ä½•ä¸€ä¸ªç»„ä»¶æ»šåŠ¨é¡µé¢ï¼Œåˆ‡æ¢åˆ°å…¶ä»–ç»„ä»¶çš„æ—¶å€™ï¼Œé¡µé¢ä»ä¿æŒæ»šåŠ¨ä¹‹å‰çš„çŠ¶æ€ï¼Œè¿™å°±æ˜¯å‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µ.</li>
</ol>
</blockquote>
<p><strong>é—®é¢˜2ï¼š</strong></p>
<p>åŠ å…¥æœ‰<code>A B C</code>ä¸‰ä¸ªé¡µé¢ï¼Œæˆ‘ç°åœ¨åªæƒ³è¦<code>A-&gt;B</code>æ—¶<code>A</code>ç¼“å­˜ï¼Œç„¶å<code>B-&gt;A</code>æ—¶ï¼Œå±•ç¤ºç¼“å­˜çš„é¡µé¢ï¼Œ<code>C-&gt;A</code>ã€<code>A-&gt;B-&gt;C-&gt;A</code>ç­‰éƒ½ä¸è¦ç¼“å­˜ã€‚</p>
<h2 id="scrollBehavior"><a href="#scrollBehavior" class="headerlink" title="scrollBehavior"></a>scrollBehavior</h2><p>å¯¹äº <strong><code>é—®é¢˜1</code></strong> æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œè·³è½¬å‰ç›´æ¥æŠŠæ»šåŠ¨é«˜åº¦ç¼“å­˜èµ·æ¥ï¼Œç„¶åæ¯æ¬¡å†å›æ¥çš„æ—¶å€™ï¼Œåœ¨æŠŠé«˜åº¦åœ¨é‡æ–°èµ‹å€¼ç»™å®ƒï¼Œä½†æ˜¯å¦‚æœæˆ‘é¡µé¢ç‰¹åˆ«å¤šéƒ½éœ€è¦ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œå°±æœ‰äº›éº»çƒ¦ï¼Œç„¶åæˆ‘å‘ç°è·¯ç”±æä¾›çš„ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ã€‚</p>
<p><a href="https://router.vuejs.org/zh/guide/advanced/scroll-behavior.html" target="_blank" rel="noopener">scrollBehavioræ–‡æ¡£è¯¦è§£</a></p>
<p><strong>scrollBehavior</strong> æ–¹æ³•æ¥æ”¶ to å’Œ from è·¯ç”±å¯¹è±¡ã€‚<strong>ç¬¬ä¸‰ä¸ªå‚æ•° <code>savedPosition</code></strong> å½“ä¸”ä»…å½“ popstate å¯¼èˆª (<code>é€šè¿‡æµè§ˆå™¨çš„ å‰è¿›/åé€€ æŒ‰é’®è§¦å‘</code>) æ—¶æ‰å¯ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'hash'</span>,</span><br><span class="line">  routes,</span><br><span class="line">  scrollBehavior(to, <span class="keyword">from</span>, savedPosition) &#123;</span><br><span class="line">    <span class="comment">// æ­¤æ–¹æ³•é»˜è®¤æ˜¯æ£€æµ‹ document.body çš„ï¼Œå¦‚æœä½ æ˜¯è‡ªå®šä¹‰çš„æ»šåŠ¨ç›’å­ æ˜¯æ²¡åŠæ³•æ§åˆ¶ä½ çš„æ»šåŠ¨é«˜åº¦ï¼Œéƒ½æ˜¯ 0</span></span><br><span class="line">    <span class="built_in">console</span>.log(savedPosition);</span><br><span class="line">    <span class="comment">// å¦‚æœè¿”å›ä¸€ä¸ª falsy(ä¸æ˜¯false) ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆä¸ä¼šå‘ç”Ÿæ»šåŠ¨,è¯´ç™½äº†å°±æ˜¯è¿™ä¸ªæ–¹æ³•æ²¡ç”¨ï¼Œå¹¶ä¸ä¼šåœ¨é¡µé¢é¡¶éƒ¨</span></span><br><span class="line">    <span class="comment">// falsyæ–‡æ¡£ https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy</span></span><br><span class="line">    <span class="keyword">if</span> (savedPosition) &#123;</span><br><span class="line">      <span class="keyword">return</span> savedPosition</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">from</span>.meta.keepAlive) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå¹¶ä¸å‡†ç¡®ï¼Œå¯èƒ½æˆ‘é¡µé¢æ»šåŠ¨çš„ç›’å­ä¸æ˜¯body,vueåº”è¯¥æœ‰è®¾ç½®çš„åœ°æ–¹</span></span><br><span class="line">        <span class="keyword">from</span>.meta.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: to.meta.scrollTop || <span class="number">0</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°ç‰ˆæœ¬æ”¯æŒå¼‚æ­¥æ»šåŠ¨ï¼Œè¿”å›ä¸€ä¸ªPromiseï¼Œè¿™ä¸ªç‰¹åˆ«æœ‰ç”¨ï¼Œä¹‹å‰çš„æ–¹å¼å¦‚æœé¡µé¢é‡Œæœ‰å¼‚æ­¥è¯·æ±‚çš„è¯ï¼Œæ˜¯ä¸èƒ½å¤Ÿç½®é¡¶çš„</span></span><br><span class="line">scrollBehavior(to, <span class="keyword">from</span>, savedPosition) &#123;</span><br><span class="line">  <span class="keyword">if</span> (savedPosition) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(savedPosition)</span><br><span class="line">      &#125;, <span class="number">20</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">from</span>.meta.keepAlive) &#123;</span><br><span class="line">      <span class="keyword">from</span>.meta.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: to.meta.scrollTop || <span class="number">0</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°"><a href="#å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°" class="headerlink" title="å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°"></a>å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°</h2><h3 id="å®ç°æ–¹å¼ä¸€"><a href="#å®ç°æ–¹å¼ä¸€" class="headerlink" title="å®ç°æ–¹å¼ä¸€"></a>å®ç°æ–¹å¼ä¸€</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app.vue</span></span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">   &lt;router-view v-<span class="keyword">if</span>=<span class="string">"$route.meta.keepAlive"</span> /&gt;</span><br><span class="line">&lt;<span class="regexp">/keep-alive&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;router-view v-if="!$route.meta.keepAlive" /</span>&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// router.js</span></span><br><span class="line">&#123;</span><br><span class="line">   path: <span class="string">'/table-list'</span>,</span><br><span class="line">   name: <span class="string">'table-list'</span>,</span><br><span class="line">   component: TableList,</span><br><span class="line">   meta: &#123;<span class="attr">keepAlive</span>: <span class="literal">true</span>&#125; <span class="comment">// æ·»åŠ è¿™ä¸ª</span></span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">   path: <span class="string">'/table-detail'</span>,</span><br><span class="line">   name: <span class="string">'table-detail'</span>,</span><br><span class="line">   component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../views/table-detail.vue'</span>),</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹å¼ä¸€å’Œæ–¹å¼äºŒéƒ½æ˜¯åŸºäºä¸Šé¢è¿™ä¸¤ä¸ªä»£ç æ®µã€‚</p>
<p>åœ¨è¦ç¼“å­˜çš„åˆ—è¡¨é¡µæ·»åŠ ä¸‹é¢çš„ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">activated() &#123;</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›æ¥çš„æ—¶å€™ï¼Œå°±ä¸ç”¨æ‰§è¡Œä¸‹é¢çš„å‡½æ•°ã€‚</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.hasFirst) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">this</span>.queryList()</span><br><span class="line">&#125;,</span><br><span class="line">beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.name === <span class="string">'table-detail'</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">from</span>.meta.keepAlive) &#123;</span><br><span class="line">      <span class="keyword">from</span>.meta.keepAlive = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">from</span>.meta.keepAlive = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.$destroy(); <span class="comment">//é”€æ¯ç±»é¡µè¡¨é¡µçš„å®ä¾‹ï¼Œæœ‰å‘</span></span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œæˆä¸Šé¢çš„ä»£ç åï¼Œ<code>A-&gt;B-&gt;A</code>æ­£å¸¸ï¼Œç„¶åå½“<code>A-&gt;C-&gt;A-&gt;B-&gt;A</code>å‘ç°åˆ—è¡¨é¡µAä¸ä¼šå†ç¼“å­˜äº†ï¼Œæ¯æ¬¡éƒ½æ˜¯æ–°çš„é¡µé¢ã€‚è°·æ­Œåçš„æ–¹æ³•æ˜¯è‹¥ä¸æ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥å°±å¼ºåˆ¶åˆ·æ–°ä¸€æ¬¡ç¼“å­˜é¡µé¢ã€‚<br><strong><code>this.$destroy()</code></strong>  è°ƒç”¨<code>distory</code>ä¹‹åä¸èƒ½å†ç¼“å­˜è¯¥ç»„ä»¶ è€Œä¸”ä¼šä¸æ–­è¿›å…¥è¿™ä¸ªé¡µé¢åé‡å¤ç”Ÿæˆå¤šä¸ªè™šæ‹Ÿdom.</p>
<p>ç»§ç»­å®Œå–„ï¼Œåœ¨<code>main.js</code>ä¸­ä½¿ç”¨router.afterEach((to,from)=&gt;{})</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸç†æ˜¯å¦‚æœä¸æ˜¯ä»è¯¦æƒ…é¡µè¿›æ¥çš„é¡µé¢ï¼Œéƒ½éœ€è¦åˆ·æ–°ï¼Œå¦åˆ™ä¸èƒ½ç¼“å­˜</span></span><br><span class="line">router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¦‚æœå½“å‰é¡µé¢åˆ·æ–°æˆ–è€…ä»è¯¦æƒ…ä¹Ÿè¿›æ¥ï¼Œå°±è¦æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œé˜²æ­¢æ‰§è¡Œé”€æ¯æ–¹æ³•å¯¼è‡´ä¸èƒ½ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">from</span>.name &amp;&amp; <span class="keyword">from</span>.name !== <span class="string">'table-detail'</span> &amp;&amp; to.name === <span class="string">'table-list'</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> isRefresh = sessionStorage.getItem(<span class="string">'isRefresh'</span>)</span><br><span class="line">    <span class="keyword">if</span> (isRefresh === <span class="string">'0'</span>) &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;<span class="comment">// è¿™é‡Œå¿…é¡»æ˜¯å¼‚æ­¥çš„ï¼Œä¸ç„¶ä¸èƒ½è·³è½¬</span></span><br><span class="line">        <span class="built_in">window</span>.location.reload()</span><br><span class="line">      &#125;)</span><br><span class="line">      sessionStorage.setItem(<span class="string">'isRefresh'</span>, <span class="literal">null</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      sessionStorage.setItem(<span class="string">'isRefresh'</span>, <span class="string">'0'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">from</span>.name === <span class="string">'table-list'</span> &amp;&amp; to.name === <span class="string">'table-detail'</span>) &#123;</span><br><span class="line">    sessionStorage.setItem(<span class="string">'isRefresh'</span>, <span class="literal">null</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    sessionStorage.setItem(<span class="string">'isRefresh'</span>, <span class="string">'0'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä¸çŸ¥é“è°·æ­Œå‡ºæ¥çš„è§£å†³æ–¹æ¡ˆä¸ºä»€ä¹ˆéƒ½åœ¨è¯¦æƒ…é¡µåˆ·æ–°ï¼Œè¿™æ ·çš„é—®é¢˜å°±æ˜¯ç”¨æˆ·ç¬¬ä¸€æ¬¡è·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œå†å›åˆ°åˆ—è¡¨é¡µæ˜¯æ²¡æœ‰ç¼“å­˜çš„åŠŸèƒ½ï¼Œç¬¬äºŒæ¬¡å°±ä¼šæ­£å¸¸ï¼Œä½†æ˜¯å®¢æˆ·å¾ˆå¯èƒ½å°±ä¼šæ‰§è¡Œè¿™ä¸€æ¬¡æ“ä½œï¼›</p>
<p>è¿™ç§è§£å†³æ–¹å¼å¤ªè¿‡åŸå§‹ï¼Œç”¨æˆ·ä½“éªŒå¤ªå·®ï¼Œè€Œä¸”éœ€è¦ç¼“å­˜å¤šä¸ªé¡µé¢å°±ä¸å¤ªå¥½æ§åˆ¶ï¼Œä¸å»ºè®®ç”¨è¿™ä¸ªæ–¹æ³•</p>
<h3 id="å®ç°æ–¹å¼äºŒ"><a href="#å®ç°æ–¹å¼äºŒ" class="headerlink" title="å®ç°æ–¹å¼äºŒ"></a>å®ç°æ–¹å¼äºŒ</h3><p>çµæ„Ÿæ¥è‡ª<code>æ–¹å¼ä¸€</code>ï¼Œæˆ‘å¯ä»¥å…¶ä»–æ–¹å¼æ¨¡æ‹Ÿé¡µé¢åˆ·æ–°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!--è¿™é‡Œä¸€å®šè¦ä½¿ç”¨v-<span class="keyword">if</span>ï¼Œå¥½å¤„æ˜¯ä½ å¯ä»¥ä½¿ç”¨$nextTickä½“éªŒæ›´å¥½ï¼Œå¦ä¸€æ–¹é¢æ˜¯åœ¨ä½¿ç”¨v-showä¹‹åï¼Œä»–å°±ç›¸å½“äºéšè—äº†è¯¥é¡µé¢ï¼Œä½†æ˜¯å¦‚æœé‡Œé¢æœ‰ä¸€äº›ä¸ä¼šdiffçš„dom,å°±ä¼šå±•ç¤ºå‡ºæ¥ï¼Œæ¨¡æ‹Ÿåˆ·æ–°çš„ä½“éªŒå°±ä¸å¤ªå¥½ã€‚ä¾‹å¦‚ä½¿ç”¨ input-&gt;</span><br><span class="line">    &lt;div v-<span class="keyword">if</span>=<span class="string">"isRouterAlive"</span>&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123;ddd&#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input v-model="ddd" type="text" /</span>&gt;</span><br><span class="line">        &lt;table-list ref=<span class="string">"table"</span> :multiple=<span class="string">"true"</span> :otherTableParams=<span class="string">"otherTableParams"</span> :tableColumn=<span class="string">"column"</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// å…¶ä»–ä»£ç  ........</span></span><br><span class="line">    activated() &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.$route.meta.isRefresh) &#123; <span class="comment">// å¦‚æœä¸æ˜¯è·³è½¬åˆ°è¯¦æƒ…é¡µ</span></span><br><span class="line">        <span class="keyword">const</span> resetData = <span class="keyword">this</span>.$options.data() <span class="comment">// è·å–åŸæ¥dataçš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">delete</span> resetData.column  <span class="comment">// æˆ‘åœ¨è¿™é‡Œæ“ä½œçš„åŸå› æ˜¯å› ä¸ºï¼Œæˆ‘é€šè¿‡ä¸Šé¢è·å–çš„æ•°æ®é‡Œé¢ï¼Œç”¨åˆ°å‡½æ•°è¿”å›çš„å½¢å¼ï¼Œå±•ç¤ºä¸ºundefined  &#123;cb: this.jumpEdit&#125; å±•ç¤ºä¸º &#123;cb: this.undefined&#125;,å…·ä½“åŸå› æœªçŸ¥</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">this</span>.$data, resetData) <span class="comment">// é‡ç½®data</span></span><br><span class="line">        <span class="keyword">this</span>.isRouterAlive = <span class="literal">false</span> <span class="comment">// é€šè¿‡v-ifä¸å±•ç¤ºå½“å‰é¡µé¢ </span></span><br><span class="line">        <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">          <span class="built_in">window</span>.scroll(<span class="number">0</span>, <span class="number">0</span>) <span class="comment">// é¡µé¢ç½®é¡¶ï¼Œä¸è¦å†ä¸‹é¢çš„å®šæ—¶å™¨é‡Œé¢ä½¿ç”¨ï¼Œæœ‰é¡¿æŒ«æ„Ÿ</span></span><br><span class="line">          <span class="keyword">this</span>.isRouterAlive = <span class="literal">true</span> <span class="comment">// é€šè¿‡v-ifå±•ç¤ºå½“å‰é¡µé¢ </span></span><br><span class="line">        &#125;)</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.queryList() <span class="comment">// å¼‚æ­¥è·å–æ•°æ®ï¼Œè·Ÿæˆ‘çš„é¡¹ç›®ç»„ä»¶æœ‰å…³ï¼Œä½ ä»¬å¯ä»¥ç›´æ¥åœ¨ä¸Šé¢è·å–å°±OK</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­å¦‚æœä¸æ˜¯è¿›è¯¦æƒ…é¡µï¼Œå±•ç¤ºä¸ºtrue æ˜¯é¡µé¢é‡æ–°åŠ è½½çš„æ„æ€</span></span><br><span class="line">      <span class="keyword">from</span>.meta.isRefresh = to.name !== <span class="string">'table-detail'</span>;</span><br><span class="line">      next() <span class="comment">// ä¸æ·»åŠ è·¯ç”±ä¸ä¼šè·³è½¬</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜åŒ–</strong><br>ç°åœ¨çš„ä»£ç æœ‰ä¸¤ä¸ªé—®é¢˜<br><code>ä¸€</code>æ˜¯ä»è¯¦æƒ…é¡µåˆ°åˆ—è¡¨é¡µï¼Œæ•°æ®ä¸ä¼šæ›´æ–°ï¼Œå¦‚æœæˆ‘åœ¨è¯¦æƒ…é¡µä¿®æ”¹äº†æŸä¸ªæ•°æ®ï¼Œç„¶åå†åˆ°åˆ—è¡¨é¡µå°±ä¼šæ»å;<br><code>äºŒ</code>æ˜¯ä»è¯¦æƒ…é¡µè·³è½¬åˆ°åˆ«çš„åˆ—è¡¨é¡µç„¶ååœ¨è·³è½¬åˆ°ç¼“å­˜çš„åˆ—è¡¨é¡µï¼Œç„¶åä»–è¿˜æ˜¯ä¼šç¼“å­˜ä¹‹å‰çš„æ•°æ®ï¼Œä¸ä¼šæ›´æ–°å½“å‰é¡µé¢;</p>
<p>ä¼˜åŒ–å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">activated() &#123;</span><br><span class="line"> <span class="comment">// å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›æ¥ä¸æ‰§è¡Œä¸‹é¢çš„æ–¹æ³•ï¼Œå¦åˆ™ä¼šè¯·æ±‚ä¸¤æ¬¡æ•°æ®</span></span><br><span class="line"> <span class="comment">// this.hasFirst ä¸ç”¨ç”Ÿæˆå“åº”å¼çš„ï¼Œç›´æ¥ä¸€ä¸ªå˜é‡å°±å¥½</span></span><br><span class="line"> <span class="keyword">if</span> (<span class="keyword">this</span>.hasFirst) <span class="keyword">return</span></span><br><span class="line"> <span class="keyword">if</span> (<span class="keyword">this</span>.$route.meta.isRefresh) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">this</span>.$options.data()</span><br><span class="line">    <span class="keyword">delete</span> data.column</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>.$data, data)</span><br><span class="line">    <span class="keyword">this</span>.isRouterAlive = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">window</span>.scroll(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">this</span>.isRouterAlive = <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.queryList()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.$route.meta.isRefresh === <span class="literal">false</span>) &#123; </span><br><span class="line">    <span class="comment">// this.$route.meta.isRefreshåœ¨è·¯ç”±é‡Œé¢æˆ‘å¹¶æ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤æ˜¯undefinedï¼Œå½“ä»–ä¸ºfalseçš„æ—¶å€™ï¼Œè¯´æ˜ä»–ä»åˆ«çš„é¡µé¢è¿›æ¥äº†ï¼Œè¿™ä¸ªæ—¶å€™è®©ä»–è¯·æ±‚ä¸‹æ•°æ®</span></span><br><span class="line">    <span class="keyword">this</span>.queryList()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">beforeRouteEnter(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line"> <span class="comment">// è¿™ä¸ªè·¯ç”±å®ˆå«å‡½æ•°å¼æœ€å…ˆæ‰§è¡Œçš„</span></span><br><span class="line"> to.meta.isRefresh = <span class="keyword">from</span>.name &amp;&amp; <span class="keyword">from</span>.name !== <span class="string">'table-detail'</span>;</span><br><span class="line">  next()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¸‹é¢ä»£ç æ³¨é‡Šå³å¯</span></span><br><span class="line"><span class="comment">// beforeRouteLeave(to, from, next) &#123;</span></span><br><span class="line"><span class="comment">//   from.meta.isRefresh = to.name !== 'table-detail';</span></span><br><span class="line"><span class="comment">//   next()</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>æœ€åå¯ä»¥æŠŠè¿™äº›ä»£ç æŠ½ç¦»æˆä¸€ä¸ª<code>mixins</code>,ç„¶åç¼–å†™ä¸€ä¸ªåˆ·æ–°çš„ç»„ä»¶ï¼Œå“ªé‡Œç”¨åœ¨å“ªé‡Œè°ƒå–ä¸‹,<a href="/2020/06/15/workspace/Frame/vue/reload/">ä¹Ÿå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<h3 id="å®ç°æ–¹å¼ä¸‰"><a href="#å®ç°æ–¹å¼ä¸‰" class="headerlink" title="å®ç°æ–¹å¼ä¸‰"></a>å®ç°æ–¹å¼ä¸‰</h3><p>è¿™ç§ç”¨ <code>keep-alive</code> æä¾›çš„ <code>include</code> å’Œ <code>exclude</code>,ç„¶åé…åˆvuexå®ç°åŠ¨æ€æ§åˆ¶ã€‚</p>
<p><strong>è·¯ç”±å…¥å£é¡µé¢</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app.vue</span></span><br><span class="line">&lt;keep-alive :include=<span class="string">'includes'</span> :exclude=<span class="string">''</span>:max=<span class="string">"3"</span>&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;<span class="regexp">/router-view&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­<code>include</code>ä»£è¡¨ç€è¦ç¼“å­˜çš„ï¼Œ<code>exclude</code>ä»£è¡¨ç€éç¼“å­˜çš„,<code>max</code>ä»£è¡¨æœ€å¤šç¼“å­˜çš„ä¸ªæ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–vuexçš„æ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> &#123;mapGetters&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  computed: &#123;<span class="comment">// åœ¨computedä¸­åŠ¨æ€ç›‘æ§</span></span><br><span class="line">     ...mapGetters([<span class="string">'includes'</span>]),</span><br><span class="line">   &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">     changeStore() &#123;</span><br><span class="line">       <span class="comment">// æ”¹å˜vueçš„æ•°æ®ï¼Œåœ¨è¿™ç”¨ä¸åˆ°</span></span><br><span class="line">       <span class="keyword">this</span>.$store.commit(<span class="string">'change'</span>, <span class="string">'tableLists'</span>)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Vuex</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> keepalive = &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    includes: [<span class="string">'tableLists'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    change(state, payload) &#123;</span><br><span class="line">      state.includes = payload</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    includes(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.includes</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> keepalive</span><br></pre></td></tr></table></figure>

<p><strong>åˆ—è¡¨é¡µçš„éƒ¨åˆ†ä»£ç </strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">activated() &#123;</span><br><span class="line">  <span class="comment">// åŒä¸Šï¼Œå¦‚æœç¬¬ä¸€æ¬¡è¿›æ¥ï¼Œä¸æ‰§è¡Œä¸‹é¢çš„æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.hasFirst) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">this</span>.queryList()</span><br><span class="line">&#125;,</span><br><span class="line">beforeRouteEnter(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="comment">// è¿™ä¸ªæ—¶å€™è¿˜æœ‰æ²¡this,æ‰€ä»¥è¿™é‡Œç”¨thisçš„è¯æ˜¯ä¸èƒ½æ“ä½œvuex,æˆ‘æ˜¯åœ¨main.jsé‡Œé¢èµ‹å€¼ç»™äº†window</span></span><br><span class="line">  <span class="built_in">window</span>._store.commit(<span class="string">'change'</span>, [<span class="string">'tableLists'</span>]);</span><br><span class="line">  next()</span><br><span class="line">  <span class="comment">// ä¹Ÿå¯ä»¥è¿™ä¹ˆç”¨</span></span><br><span class="line">  <span class="comment">// next((el) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//  el.$store.commit('change', ['tableLists']);</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">&#125;,</span><br><span class="line">beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œå¯ä»¥ç»Ÿä¸€åœ¨ scrollBehavior å¤„ç†å°±å¥½äº†ï¼ˆå»ºè®®åœ¨è¿™é‡Œæ·»åŠ  = å‚è€ƒä¸‹é¢ï¼‰</span></span><br><span class="line">  <span class="keyword">from</span>.meta.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop; </span><br><span class="line">  <span class="keyword">if</span> (to.name !== <span class="string">'table-detail'</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸æ˜¯è·³è½¬åˆ°è¯¦æƒ…é¡µé¢ï¼Œå°±ç©¿ä¸ªç©ºæ•°ç»„ï¼Œè¿™é‡Œä¸èƒ½ç”¨ '' é»˜è®¤æ˜¯æ‰€æœ‰çš„éƒ½ç¼“å­˜</span></span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'change'</span>, []);</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¯¦æƒ…é¡µçš„éƒ¨åˆ†ä»£ç </strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.name !== <span class="string">'table-list'</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'change'</span>, []);</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è·¯ç”±é¡µé¢</strong></p>
<p>å› ä¸ºincludesæ²¡æœ‰åœ¨è·¯ç”±é‡Œé¢å®šä¹‰ keepalive,æ‰€ä»¥ä¸Šé¢çš„<code>scrollBehavior</code>è¿™ä¸ªæ–¹æ³•å½“ä½¿ç”¨åˆæˆäº‹ä»¶è·³è½¬çš„æ—¶å€™ï¼Œéœ€è¦åšé¢å¤–çš„å¤„ç†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">scrollBehavior(to, <span class="keyword">from</span>, savedPosition) &#123;</span><br><span class="line">  <span class="keyword">if</span> (savedPosition) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(savedPosition)</span><br><span class="line">      &#125;, <span class="number">20</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ary = [<span class="string">'Invest'</span>, <span class="string">'Store'</span>];  <span class="comment">// è¿™é‡Œéœ€è¦ç¼“å­˜çš„é¡µé¢çš„routeçš„name   ä¸æ˜¯vueç±»çš„name</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œåˆ—è¡¨é¡µè·³è½¬åˆ°åˆ«çš„é¡µé¢ï¼Œä¹Ÿä¼šä¿ç•™é¡µé¢çš„æ»šåŠ¨é«˜åº¦ä½†æ˜¯å¹¶æ²¡æœ‰ç¼“å­˜å½“å‰çš„é¡µé¢ï¼Œæ‰€ä»¥å½“é¡µé¢å†æ¬¡è¿”å›çš„æ—¶å€™ä¼šé‡æ–°åŠ è½½å½“å‰é¡µé¢</span></span><br><span class="line">    <span class="keyword">if</span> (ary.includes(<span class="keyword">from</span>.name)) &#123;</span><br><span class="line">      <span class="comment">/* æœ€è¿‘ä¸€æ¬¡å›é¡¾çš„æ—¶å€™ å‘ç°äº†ä¸€ä¸ªé—®é¢˜</span></span><br><span class="line"><span class="comment">       * å¦‚æœæ˜¯åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œè¿™ä¸ªæ—¶å€™æ—¶å€™å…¶å®å·²ç»åˆ°äº†è¯¦æƒ…é¡µé¢ï¼Œ</span></span><br><span class="line"><span class="comment">       * å¦‚æœå½“å½“å‰è¯¦æƒ…é¡µçš„é¡µé¢çš„é«˜åº¦æ²¡æœ‰åˆ—è¡¨é¡µé¢è·³è½¬è¿›æ¥æ—¶æ»šåŠ¨çš„é«˜åº¦é«˜çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè·å–ä¸çœŸæ­£çš„é¡µé¢é«˜åº¦ï¼Œç„¶ååˆæˆäº‹ä»¶å›é€€çš„æ—¶å€™å°±ä¼šæ»šåŠ¨ä¸åˆ°è·³è½¬å‰çš„ä½ç½®</span></span><br><span class="line"><span class="comment">       * è§£å†³çš„åŠæ³•å°±æ˜¯åœ¨æ¯ä¸ªé¡µé¢ç¦»å¼€å‰ï¼Œè·å–åˆ°é¡µé¢çš„é«˜åº¦ï¼Œå­˜åˆ°çš„metaä¸Šï¼Œè¿™æ ·æ—¢èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿèƒ½ç»“å±€æŠŠä¸æ˜¯bodyæ»šåŠ¨çš„æƒ…å†µè·å–ä¸åˆ°æ»šåŠ¨é«˜åº¦çš„é—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="keyword">from</span>.meta.scrollTop = <span class="built_in">document</span>.documentElement.scrollTop;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: to.meta.scrollTop || <span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç æ¯”è¾ƒçç¢ï¼Œéœ€è¦æ·»åŠ åˆ°æ¯ä¸€ä¸ªé¡µé¢ï¼Œæ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­å¤§å®¶å¯æ·»åŠ ä¸€ä¸ªkeepaliveçš„mixins,æ–¹ä¾¿å¤§å®¶ç®¡ç†ã€‚</p>
<p><strong>ä½¿ç”¨includeå’Œexcludeçš„æ³¨æ„ç‚¹ï¼š</strong></p>
<ol>
<li>æ¯ä¸ªç»„ä»¶å†…éƒ¨æ·»åŠ  {name:xx}</li>
<li>è‹¥å°†includeè®¾ç½®ç©º â€˜ â€˜ æ¯ä¸ªé¡µé¢éƒ½å°†ä¼šç¼“å­˜</li>
<li>excludeçš„ä¼˜å…ˆçº§é«˜äºinclude ä½¿ç”¨excludeå</li>
</ol>
<hr>
<blockquote>
<p>äººç”Ÿä¸­ç¬¬ä¸€æ¬¡å‘å¸ƒæ–‡ç« ï¼Œå¸Œæœ›å¤§ä½¬ä»¬å¤šå¤šæŒ‡æ•™ï¼Œ</p>
</blockquote>
<hr>
<h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://github.com/vuejs/vue/blob/dev/src/core/components/keep-alive.js" target="_blank" rel="noopener">keep-alive</a></p>
<p><a href="https://github.com/vuejs/vue-router/issues/811" target="_blank" rel="noopener">vueRouterIssues</a></p>
<p><a href="https://github.com/vuejs/vue-router/blob/dev/src/util/scroll.js#L10:1" target="_blank" rel="noopener">scrollBehavior</a></p>
<p><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB" target="_blank" rel="noopener">å¯¼èˆªå®ˆå«</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:feng960106@163.com">hfzvictory</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://file.jing999.cn/2020/05/25/workspace/Frame/vue/keep-alive/">http://file.jing999.cn/2020/05/25/workspace/Frame/vue/keep-alive/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://file.jing999.cn" target="_blank">hfzvictory</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://tva1.sinaimg.cn/large/007S8ZIlly1gegal5ikmoj30u00xpe81.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.png" alt="å¾®ä¿¡"/><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.png" alt="æ”¯ä»˜å®"/><div class="post-qr-code__desc">æ”¯ä»˜å®</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/02/workspace/Frame/vue/source-code/keep-alive/"><img class="prev_cover" data-src="https://tva1.sinaimg.cn/large/007S8ZIlly1gegal5ikmoj30u00xpe81.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">keep-aliveæºç åˆ†æ</div></div></a></div><div class="next-post pull_right"><a href="/2020/03/17/workspace/Frame/vue/next/reactivity/"><img class="next_cover" data-src="https://tva1.sinaimg.cn/large/007S8ZIlly1gegal5ikmoj30u00xpe81.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">vue3.oæºç åˆ†æ</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: '37fl65GwM0Ub4TbovXtyyFl7-gzGzoHsz',
  appKey: 'ASnnLHANk3heLWLCBK6zbfiw',
  notify: false,
  verify: false,
  placeholder: 'è¾“å…¥è¯„è®º...',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '20',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: true,
  requiredFields: requiredFields
});</script></div></article></main></div><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2021 By hfzvictory</div><div class="framework-info"><span>Driven </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn/" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>äº¬ICPå¤‡18059340å·-1</span></a></div></div></footer><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">ç¹</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.5" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/search/local-search.js"></script></body></html>