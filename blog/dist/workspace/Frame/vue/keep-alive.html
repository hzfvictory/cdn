<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä½¿ç”¨keepAliveé‡åˆ°çš„å‘ | hzfvictory&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="æ”¶è—å¤¹">
    
    <link rel="preload" href="/assets/css/0.styles.5c79091b.css" as="style"><link rel="preload" href="/assets/js/app.0eaa2b4b.js" as="script"><link rel="preload" href="/assets/js/2.4ad1b535.js" as="script"><link rel="preload" href="/assets/js/53.fd7c5cdb.js" as="script"><link rel="prefetch" href="/assets/js/10.90112c20.js"><link rel="prefetch" href="/assets/js/100.103fee66.js"><link rel="prefetch" href="/assets/js/101.c0d48ebc.js"><link rel="prefetch" href="/assets/js/102.efa451bb.js"><link rel="prefetch" href="/assets/js/103.be29fcfe.js"><link rel="prefetch" href="/assets/js/104.776e1e86.js"><link rel="prefetch" href="/assets/js/105.d84d31e2.js"><link rel="prefetch" href="/assets/js/106.7914ae1a.js"><link rel="prefetch" href="/assets/js/107.a3569496.js"><link rel="prefetch" href="/assets/js/108.14ebedba.js"><link rel="prefetch" href="/assets/js/109.568b79e0.js"><link rel="prefetch" href="/assets/js/11.8cf48b29.js"><link rel="prefetch" href="/assets/js/110.93e8c7ad.js"><link rel="prefetch" href="/assets/js/111.13f2c478.js"><link rel="prefetch" href="/assets/js/112.ed64d6dd.js"><link rel="prefetch" href="/assets/js/113.0c0fd36f.js"><link rel="prefetch" href="/assets/js/114.2936cd29.js"><link rel="prefetch" href="/assets/js/115.27885001.js"><link rel="prefetch" href="/assets/js/116.05d3e9a4.js"><link rel="prefetch" href="/assets/js/117.1673ea1c.js"><link rel="prefetch" href="/assets/js/118.99ebdb92.js"><link rel="prefetch" href="/assets/js/119.d3cddaec.js"><link rel="prefetch" href="/assets/js/12.0c635c05.js"><link rel="prefetch" href="/assets/js/120.0603644d.js"><link rel="prefetch" href="/assets/js/121.c5703732.js"><link rel="prefetch" href="/assets/js/122.5a46c29e.js"><link rel="prefetch" href="/assets/js/123.dae7c515.js"><link rel="prefetch" href="/assets/js/124.ebba5bb1.js"><link rel="prefetch" href="/assets/js/125.16407b19.js"><link rel="prefetch" href="/assets/js/126.d1d56663.js"><link rel="prefetch" href="/assets/js/127.39c2ea1f.js"><link rel="prefetch" href="/assets/js/128.165bfcc0.js"><link rel="prefetch" href="/assets/js/129.e06b85df.js"><link rel="prefetch" href="/assets/js/13.7cbb3221.js"><link rel="prefetch" href="/assets/js/14.4c6c2778.js"><link rel="prefetch" href="/assets/js/15.ae30bb72.js"><link rel="prefetch" href="/assets/js/16.80523435.js"><link rel="prefetch" href="/assets/js/17.46f91e7d.js"><link rel="prefetch" href="/assets/js/18.151010e8.js"><link rel="prefetch" href="/assets/js/19.d21d87a1.js"><link rel="prefetch" href="/assets/js/20.7d40e53f.js"><link rel="prefetch" href="/assets/js/21.3cf003b1.js"><link rel="prefetch" href="/assets/js/22.a8d45e40.js"><link rel="prefetch" href="/assets/js/23.28ce4391.js"><link rel="prefetch" href="/assets/js/24.3069321f.js"><link rel="prefetch" href="/assets/js/25.37fe9e31.js"><link rel="prefetch" href="/assets/js/26.c0c21392.js"><link rel="prefetch" href="/assets/js/27.a4c295a9.js"><link rel="prefetch" href="/assets/js/28.4c82f86f.js"><link rel="prefetch" href="/assets/js/29.ef21af2a.js"><link rel="prefetch" href="/assets/js/3.fa7f3b91.js"><link rel="prefetch" href="/assets/js/30.3e6069a5.js"><link rel="prefetch" href="/assets/js/31.67d8fe32.js"><link rel="prefetch" href="/assets/js/32.4ef63c63.js"><link rel="prefetch" href="/assets/js/33.70cc5cef.js"><link rel="prefetch" href="/assets/js/34.54fed556.js"><link rel="prefetch" href="/assets/js/35.8f933c67.js"><link rel="prefetch" href="/assets/js/36.20162186.js"><link rel="prefetch" href="/assets/js/37.ed47b108.js"><link rel="prefetch" href="/assets/js/38.61c7345c.js"><link rel="prefetch" href="/assets/js/39.bd92f74f.js"><link rel="prefetch" href="/assets/js/4.3b6cf01a.js"><link rel="prefetch" href="/assets/js/40.55c4a778.js"><link rel="prefetch" href="/assets/js/41.91d2cfbd.js"><link rel="prefetch" href="/assets/js/42.65b9650a.js"><link rel="prefetch" href="/assets/js/43.b90d8448.js"><link rel="prefetch" href="/assets/js/44.94c4d907.js"><link rel="prefetch" href="/assets/js/45.4123a76f.js"><link rel="prefetch" href="/assets/js/46.a2b4ffbd.js"><link rel="prefetch" href="/assets/js/47.deaaf936.js"><link rel="prefetch" href="/assets/js/48.0d82998d.js"><link rel="prefetch" href="/assets/js/49.6db502b4.js"><link rel="prefetch" href="/assets/js/5.e9a18c8c.js"><link rel="prefetch" href="/assets/js/50.382f9bcc.js"><link rel="prefetch" href="/assets/js/51.27dcd19c.js"><link rel="prefetch" href="/assets/js/52.ba56fba7.js"><link rel="prefetch" href="/assets/js/54.93bc9e9f.js"><link rel="prefetch" href="/assets/js/55.68d8e23b.js"><link rel="prefetch" href="/assets/js/56.8e9a9ddd.js"><link rel="prefetch" href="/assets/js/57.0133c357.js"><link rel="prefetch" href="/assets/js/58.73a8422e.js"><link rel="prefetch" href="/assets/js/59.0aac0791.js"><link rel="prefetch" href="/assets/js/6.76ceb2c2.js"><link rel="prefetch" href="/assets/js/60.a46724fd.js"><link rel="prefetch" href="/assets/js/61.d99f8e68.js"><link rel="prefetch" href="/assets/js/62.444daf03.js"><link rel="prefetch" href="/assets/js/63.9aba7be6.js"><link rel="prefetch" href="/assets/js/64.5053469d.js"><link rel="prefetch" href="/assets/js/65.887ebb51.js"><link rel="prefetch" href="/assets/js/66.e8d21162.js"><link rel="prefetch" href="/assets/js/67.357a1c29.js"><link rel="prefetch" href="/assets/js/68.0d73110b.js"><link rel="prefetch" href="/assets/js/69.9e250292.js"><link rel="prefetch" href="/assets/js/7.3927d8dd.js"><link rel="prefetch" href="/assets/js/70.1139e9f5.js"><link rel="prefetch" href="/assets/js/71.582a2690.js"><link rel="prefetch" href="/assets/js/72.1b2d076f.js"><link rel="prefetch" href="/assets/js/73.3a04a247.js"><link rel="prefetch" href="/assets/js/74.7a33cbb8.js"><link rel="prefetch" href="/assets/js/75.02aa0fa5.js"><link rel="prefetch" href="/assets/js/76.1e4a5222.js"><link rel="prefetch" href="/assets/js/77.e6393eeb.js"><link rel="prefetch" href="/assets/js/78.eb3cbd15.js"><link rel="prefetch" href="/assets/js/79.8d03aa7a.js"><link rel="prefetch" href="/assets/js/8.04981358.js"><link rel="prefetch" href="/assets/js/80.4d9508b5.js"><link rel="prefetch" href="/assets/js/81.634a4838.js"><link rel="prefetch" href="/assets/js/82.9e158c2e.js"><link rel="prefetch" href="/assets/js/83.53e49368.js"><link rel="prefetch" href="/assets/js/84.b14074d9.js"><link rel="prefetch" href="/assets/js/85.62081e9e.js"><link rel="prefetch" href="/assets/js/86.00ce9c5a.js"><link rel="prefetch" href="/assets/js/87.e53bdb7d.js"><link rel="prefetch" href="/assets/js/88.5fcd1a0a.js"><link rel="prefetch" href="/assets/js/89.bf4139a4.js"><link rel="prefetch" href="/assets/js/9.27b14f25.js"><link rel="prefetch" href="/assets/js/90.9ea66642.js"><link rel="prefetch" href="/assets/js/91.6d3d1539.js"><link rel="prefetch" href="/assets/js/92.56b74d68.js"><link rel="prefetch" href="/assets/js/93.338fe1ff.js"><link rel="prefetch" href="/assets/js/94.e21acc3c.js"><link rel="prefetch" href="/assets/js/95.eb79e0e3.js"><link rel="prefetch" href="/assets/js/96.4efddc43.js"><link rel="prefetch" href="/assets/js/97.1ae9f6d7.js"><link rel="prefetch" href="/assets/js/98.42284ee3.js"><link rel="prefetch" href="/assets/js/99.5332b80b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5c79091b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">hzfvictory's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Useful" class="dropdown-title"><span class="title">Useful</span> <span class="arrow down"></span></button> <button type="button" aria-label="Useful" class="mobile-dropdown-title"><span class="title">Useful</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/workspace/Frame/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/workspace/Frame/react/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/workspace/Frame/taro/taroBase.html" class="nav-link">
  Taro
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Service" class="dropdown-title"><span class="title">Service</span> <span class="arrow down"></span></button> <button type="button" aria-label="Service" class="mobile-dropdown-title"><span class="title">Service</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/workspace/Server/node/node-1.html" class="nav-link">
  Koa2
</a></li></ul></div></div> <a href="https://github.com/hzfvictory/file" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Useful" class="dropdown-title"><span class="title">Useful</span> <span class="arrow down"></span></button> <button type="button" aria-label="Useful" class="mobile-dropdown-title"><span class="title">Useful</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/workspace/Frame/vue/vue.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/workspace/Frame/react/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/workspace/Frame/taro/taroBase.html" class="nav-link">
  Taro
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Service" class="dropdown-title"><span class="title">Service</span> <span class="arrow down"></span></button> <button type="button" aria-label="Service" class="mobile-dropdown-title"><span class="title">Service</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/workspace/Server/node/node-1.html" class="nav-link">
  Koa2
</a></li></ul></div></div> <a href="https://github.com/hzfvictory/file" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Base</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Project </span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>FEæ¡†æ¶</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>â˜ vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/workspace/Frame/vue/vue.html" class="sidebar-link">vueåŸºæœ¬ç”¨æ³•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/workspace/Frame/vue/jsx.html" class="sidebar-link">vueä¸­ä½¿ç”¨JSX</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/workspace/Frame/vue/vue-cli.html" class="sidebar-link">è„šæ‰‹æ¶vue-cli</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/workspace/Frame/vue/problem.html" class="sidebar-link">é—®é¢˜éªŒè¯è§£æ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/workspace/Frame/vue/prerender.html" class="sidebar-link">Vueé¢„æ¸²æŸ“</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>è¸©å‘è®°å½•</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/workspace/Frame/vue/keep-alive.html" aria-current="page" class="active sidebar-link">ä½¿ç”¨keepAliveé‡åˆ°çš„å‘</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>ä½¿ç”¨æ‹“å±•</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>æºç åˆ†æ</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>â˜ react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>â˜ taro</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>â˜ react-native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>â˜ å•å…ƒæµ‹è¯•</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Server</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Electron</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong class="old-blog">ä½¿ç”¨keepAliveé‡åˆ°çš„å‘</strong></p> <p></p><div class="table-of-contents"><ul><li><a href="#ä»‹ç»">ä»‹ç»</a></li><li><a href="#includeå’Œexclude">includeå’Œexclude</a><ul><li><a href="#includeå’Œexcludeæ— æ•ˆé—®é¢˜">includeå’Œexcludeæ— æ•ˆé—®é¢˜</a></li></ul></li><li><a href="#ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†">ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†</a></li><li><a href="#scrollbehavior">scrollBehavior</a></li><li><a href="#å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°">å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°</a><ul><li><a href="#å®ç°æ–¹å¼ä¸€">å®ç°æ–¹å¼ä¸€</a></li><li><a href="#å®ç°æ–¹å¼äºŒ">å®ç°æ–¹å¼äºŒ</a></li><li><a href="#å®ç°æ–¹å¼ä¸‰">å®ç°æ–¹å¼ä¸‰</a></li></ul></li><li><a href="#å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</a></li></ul></div><p></p> <h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="header-anchor">#</a> ä»‹ç»</h2> <p><code>keep-alive</code>æ˜¯<code>vue</code>çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚å®ƒä¼šç¼“å­˜ä¸æ´»åŠ¨çš„<strong>ç»„ä»¶å®ä¾‹</strong>ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚å®ƒæä¾›äº†<code>include</code>ä¸<code>exclude</code>å±æ€§ï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°è¿›è¡Œç¼“å­˜ï¼Œå…¶ä¸­excludeçš„ä¼˜å…ˆçº§æ¯”includeé«˜ï¼Œmaxæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚</p> <p><a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noopener noreferrer">keep-aliveè¯¦è§£æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä½¿ç”¨ <code>keep-alive</code>çš„è¯ä¼šå¢åŠ ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œ <code>activated</code> å’Œ <code>deactivated</code></p> <p>ä¸‹é¢çš„æ–‡ç« æˆ‘æ˜¯<code>keep-alive</code>é…åˆ<code>vue-router</code>ä¸€å—ä½¿ç”¨çš„ï¼Œå½“å‰<code>keep-alive</code>ä¹Ÿå¯ä»¥ç¼“å­˜å•ä¸ªç»„ä»¶ï¼Œåœ¨è¿™é‡Œå°±ä¸å¤šèµ˜è¿°ã€‚</p> <h2 id="includeå’Œexclude"><a href="#includeå’Œexclude" class="header-anchor">#</a> includeå’Œexclude</h2> <p><code>include</code> å’Œ <code>exclude</code> prop å…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°ç¼“å­˜ã€‚äºŒè€…éƒ½å¯ä»¥ç”¨<code>é€—å·åˆ†éš”å­—ç¬¦ä¸²</code>ã€<code>æ­£åˆ™è¡¨è¾¾å¼</code>æˆ–ä¸€ä¸ª<code>æ•°ç»„</code>æ¥è¡¨ç¤ºè¯¦ç»†å¥æ–‡æ¡£</p> <p>æˆ‘è¿™é‡Œä½¿ç”¨çš„<code>vuex</code>é…åˆæ•°ç»„åŠ¨æ€æ§åˆ¶</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive <span class="token operator">:</span>include<span class="token operator">=</span><span class="token string">&quot;includes&quot;</span> exclude<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token operator">:</span>max<span class="token operator">=</span><span class="token string">&quot;10&quot;</span> <span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	computed<span class="token operator">:</span> <span class="token punctuation">{</span>
	  <span class="token function">includes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	     <span class="token keyword">return</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>router<span class="token punctuation">.</span>includes
	   <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token function">changeStoreIncludes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeIncludes'</span><span class="token punctuation">,</span> <span class="token string">'tableLists'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>  
 <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>  

<span class="token comment">// vuex</span>
mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token function">changeIncludes</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  state<span class="token punctuation">.</span>includes <span class="token operator">=</span> payload
	<span class="token punctuation">}</span> 
<span class="token punctuation">}</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="includeå’Œexcludeæ— æ•ˆé—®é¢˜"><a href="#includeå’Œexcludeæ— æ•ˆé—®é¢˜" class="header-anchor">#</a> includeå’Œexcludeæ— æ•ˆé—®é¢˜</h3> <p>ä½¿ç”¨<code>include/exclude</code> å±æ€§éœ€è¦ç»™æ‰€æœ‰<code>vueç±»çš„name</code>èµ‹å€¼ï¼ˆæ³¨æ„ä¸æ˜¯ç»™routeçš„nameèµ‹å€¼ï¼‰ï¼Œå¦åˆ™ <code>include/exclude</code>ä¸ç”Ÿæ•ˆ</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 name<span class="token operator">:</span><span class="token string">'TableList'</span><span class="token punctuation">,</span> <span class="token comment">// include æˆ– excludeæ‰€ä½¿ç”¨çš„name</span>
 <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†"><a href="#ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†" class="header-anchor">#</a> ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">enter-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animated zoomInLeft<span class="token punctuation">&quot;</span></span> <span class="token attr-name">leave-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animated zoomOutRight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.meta.keepAlive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">enter-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animated zoomInLeft<span class="token punctuation">&quot;</span></span> <span class="token attr-name">leave-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animated zoomOutRight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!$route.meta.keepAlive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™æ ·åšçš„è¯æ›´åŠ ç®€å•æ˜äº†ï¼Œè€Œä¸”é…åˆåŠ¨ç”»æ›´æ­ï¼Œä¸ç”¨å†<code>vue</code>ç»„ä»¶é‡Œé¢å£°æ˜<code>name</code>ï¼Œä½†æ˜¯è¦åœ¨<code>route</code>çš„<code>meta</code>é‡Œé¢æ·»åŠ  <code>{keepAlive:true}</code>å­—æ®µï¼Œå¦‚æœè·¯ç”±æ˜¯åå°æ§åˆ¶çš„è¯ï¼Œå‰ç«¯è°ƒè¯•å°±æ¯”è¾ƒé¸¡è‚‹ã€‚</p> <p><strong>æš´éœ²çš„é—®é¢˜</strong></p> <p><strong>é—®é¢˜1ï¼š</strong></p> <p>ä½ç½®å…¬ç”¨çš„é—®é¢˜ï¼Œå½“å‰åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µé¢çš„æ—¶å€™ï¼Œä½¿ç”¨è·¯ç”±å›åˆ°åˆ—è¡¨ä¹Ÿæ—¶å€™ï¼Œä¼šå‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µã€‚ï¼ˆå¦‚æœä½¿ç”¨æµè§ˆå™¨çš„å›é€€æ–¹å¼ï¼Œä¸ä¼šå‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µã€‚ï¼‰</p> <blockquote><p><strong>å¯¹äºè¿™ä¸ªä½ç½®å…¬ç”¨çš„æƒ…å†µï¼Œæˆ‘æ˜¯ä¸€å¤´é›¾æ°´ï¼ŒæœŸå¾…å¤§ä½¬è§£ç­”</strong> ğŸ¤ï¼Œæœ‰å‡ ç‚¹è¦è¯´çš„ä¸çŸ¥å¯¹é”™ï¼Œå¾…æ±‚è¯ã€‚</p> <ul><li><strong>å¤šé¡µé¢</strong></li></ul> <ol><li>å¦‚æœæœ‰æ•°æ®è¯·æ±‚çš„è¯ï¼Œæµè§ˆå™¨å°†ä¼šæŠŠé¡µé¢ç½®é¡¶ï¼Ÿ</li> <li>å¦‚æœæ˜¯é™æ€é¡µé¢çš„è¯ï¼Œæµè§ˆå™¨ä¼šæ»šåˆ°ä½ ä¹‹å‰æ»šåŠ¨çš„åœ°æ–¹ï¼Ÿ</li> <li>ä¸Šé¢ä»…ä»…æ˜¯ä½¿ç”¨çš„æµè§ˆå™¨çš„è·³è½¬è¡Œä¸ºï¼Œå¦‚æœä½¿ç”¨hrefæˆ–è€…è·¯ç”±å°è£…ä¸€äº›æ–¹æ³•ï¼Œåˆ™éƒ½ä¼šç½®é¡¶ï¼Ÿ</li></ol> <ul><li><strong>æ±‚è¯ä¸Šé¢ ğŸ¤</strong></li></ul> <ol start="4"><li>åŸºäºSPAæ¨¡å¼å¼€å‘ï¼Œæ‰€ä»¥é¡µé¢ä»…æœ‰ä¸€ä¸ªï¼Œå®ç°é¡µé¢åˆ‡æ¢æ˜¯åˆ©ç”¨å“ˆå¸Œä¸ç»„ä»¶çš„æ˜ å°„å…³ç³»ï¼Œvue-routeræ˜¯é€šè¿‡å“ˆå¸Œæ¥æ¨¡æ‹Ÿå®Œæ•´çš„urlï¼Œä½†æ˜¯å¯¹äºé¡µé¢æ¥è¯´ä»æ˜¯ä¸€ä¸ªurlï¼Œæ‰€ä»¥åœ¨ä»»ä½•ä¸€ä¸ªç»„ä»¶æ»šåŠ¨é¡µé¢ï¼Œåˆ‡æ¢åˆ°å…¶ä»–ç»„ä»¶çš„æ—¶å€™ï¼Œé¡µé¢ä»ä¿æŒæ»šåŠ¨ä¹‹å‰çš„çŠ¶æ€ï¼Œè¿™å°±æ˜¯å‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µ.</li></ol></blockquote> <p><strong>é—®é¢˜2ï¼š</strong></p> <p>åŠ å…¥æœ‰<code>A B C</code>ä¸‰ä¸ªé¡µé¢ï¼Œæˆ‘ç°åœ¨åªæƒ³è¦<code>A-&gt;B</code>æ—¶<code>A</code>ç¼“å­˜ï¼Œç„¶å<code>B-&gt;A</code>æ—¶ï¼Œå±•ç¤ºç¼“å­˜çš„é¡µé¢ï¼Œ<code>C-&gt;A</code>ã€<code>A-&gt;B-&gt;C-&gt;A</code>ç­‰éƒ½ä¸è¦ç¼“å­˜ã€‚</p> <h2 id="scrollbehavior"><a href="#scrollbehavior" class="header-anchor">#</a> scrollBehavior</h2> <p>å¯¹äº <strong><code>é—®é¢˜1</code></strong> æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œè·³è½¬å‰ç›´æ¥æŠŠæ»šåŠ¨é«˜åº¦ç¼“å­˜èµ·æ¥ï¼Œç„¶åæ¯æ¬¡å†å›æ¥çš„æ—¶å€™ï¼Œåœ¨æŠŠé«˜åº¦åœ¨é‡æ–°èµ‹å€¼ç»™å®ƒï¼Œä½†æ˜¯å¦‚æœæˆ‘é¡µé¢ç‰¹åˆ«å¤šéƒ½éœ€è¦ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œå°±æœ‰äº›éº»çƒ¦ï¼Œç„¶åæˆ‘å‘ç°è·¯ç”±æä¾›çš„ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ã€‚</p> <p><a href="https://router.vuejs.org/zh/guide/advanced/scroll-behavior.html" target="_blank" rel="noopener noreferrer">scrollBehavioræ–‡æ¡£è¯¦è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>scrollBehavior</strong> æ–¹æ³•æ¥æ”¶ to å’Œ from è·¯ç”±å¯¹è±¡ã€‚<strong>ç¬¬ä¸‰ä¸ªå‚æ•° <code>savedPosition</code></strong> å½“ä¸”ä»…å½“ popstate å¯¼èˆª (<code>é€šè¿‡æµè§ˆå™¨çš„ å‰è¿›/åé€€ æŒ‰é’®è§¦å‘</code>) æ—¶æ‰å¯ç”¨ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'hash'</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">,</span>
  <span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ­¤æ–¹æ³•é»˜è®¤æ˜¯æ£€æµ‹ document.body çš„ï¼Œå¦‚æœä½ æ˜¯è‡ªå®šä¹‰çš„æ»šåŠ¨ç›’å­ æ˜¯æ²¡åŠæ³•æ§åˆ¶ä½ çš„æ»šåŠ¨é«˜åº¦ï¼Œéƒ½æ˜¯ 0</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å¦‚æœè¿”å›ä¸€ä¸ª falsy(ä¸æ˜¯false) ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆä¸ä¼šå‘ç”Ÿæ»šåŠ¨,è¯´ç™½äº†å°±æ˜¯è¿™ä¸ªæ–¹æ³•æ²¡ç”¨ï¼Œå¹¶ä¸ä¼šåœ¨é¡µé¢é¡¶éƒ¨</span>
    <span class="token comment">// falsyæ–‡æ¡£ https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> savedPosition
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿™é‡Œå¹¶ä¸å‡†ç¡®ï¼Œå¯èƒ½æˆ‘é¡µé¢æ»šåŠ¨çš„ç›’å­ä¸æ˜¯body,vueåº”è¯¥æœ‰è®¾ç½®çš„åœ°æ–¹</span>
        <span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router

<span class="token comment">// æ–°ç‰ˆæœ¬æ”¯æŒå¼‚æ­¥æ»šåŠ¨ï¼Œè¿”å›ä¸€ä¸ªPromiseï¼Œè¿™ä¸ªç‰¹åˆ«æœ‰ç”¨ï¼Œä¹‹å‰çš„æ–¹å¼å¦‚æœé¡µé¢é‡Œæœ‰å¼‚æ­¥è¯·æ±‚çš„è¯ï¼Œæ˜¯ä¸èƒ½å¤Ÿç½®é¡¶çš„</span>
<span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°"><a href="#å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°" class="header-anchor">#</a> å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°</h2> <h3 id="å®ç°æ–¹å¼ä¸€"><a href="#å®ç°æ–¹å¼ä¸€" class="header-anchor">#</a> å®ç°æ–¹å¼ä¸€</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// app.vue</span>
<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$route.meta.keepAlive&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!$route.meta.keepAlive&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// router.js</span>
<span class="token punctuation">{</span>
   path<span class="token operator">:</span> <span class="token string">'/table-list'</span><span class="token punctuation">,</span>
   name<span class="token operator">:</span> <span class="token string">'table-list'</span><span class="token punctuation">,</span>
   component<span class="token operator">:</span> TableList<span class="token punctuation">,</span>
   meta<span class="token operator">:</span> <span class="token punctuation">{</span>keepAlive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token comment">// æ·»åŠ è¿™ä¸ª</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span>
   path<span class="token operator">:</span> <span class="token string">'/table-detail'</span><span class="token punctuation">,</span>
   name<span class="token operator">:</span> <span class="token string">'table-detail'</span><span class="token punctuation">,</span>
   <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/table-detail.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ–¹å¼ä¸€å’Œæ–¹å¼äºŒéƒ½æ˜¯åŸºäºä¸Šé¢è¿™ä¸¤ä¸ªä»£ç æ®µã€‚</p> <p>åœ¨è¦ç¼“å­˜çš„åˆ—è¡¨é¡µæ·»åŠ ä¸‹é¢çš„ä»£ç </p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›æ¥çš„æ—¶å€™ï¼Œå°±ä¸ç”¨æ‰§è¡Œä¸‹é¢çš„å‡½æ•°ã€‚</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasFirst<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'table-detail'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//é”€æ¯ç±»é¡µè¡¨é¡µçš„å®ä¾‹ï¼Œæœ‰å‘</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å®Œæˆä¸Šé¢çš„ä»£ç åï¼Œ<code>A-&gt;B-&gt;A</code>æ­£å¸¸ï¼Œç„¶åå½“<code>A-&gt;C-&gt;A-&gt;B-&gt;A</code>å‘ç°åˆ—è¡¨é¡µAä¸ä¼šå†ç¼“å­˜äº†ï¼Œæ¯æ¬¡éƒ½æ˜¯æ–°çš„é¡µé¢ã€‚è°·æ­Œåçš„æ–¹æ³•æ˜¯è‹¥ä¸æ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥å°±å¼ºåˆ¶åˆ·æ–°ä¸€æ¬¡ç¼“å­˜é¡µé¢ã€‚
<strong><code>this.$destroy()</code></strong>  è°ƒç”¨<code>distory</code>ä¹‹åä¸èƒ½å†ç¼“å­˜è¯¥ç»„ä»¶ è€Œä¸”ä¼šä¸æ–­è¿›å…¥è¿™ä¸ªé¡µé¢åé‡å¤ç”Ÿæˆå¤šä¸ªè™šæ‹Ÿdom.</p> <p>ç»§ç»­å®Œå–„ï¼Œåœ¨<code>main.js</code>ä¸­ä½¿ç”¨router.afterEach((to,from)=&gt;{})</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// åŸç†æ˜¯å¦‚æœä¸æ˜¯ä»è¯¦æƒ…é¡µè¿›æ¥çš„é¡µé¢ï¼Œéƒ½éœ€è¦åˆ·æ–°ï¼Œå¦åˆ™ä¸èƒ½ç¼“å­˜</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¦‚æœå½“å‰é¡µé¢åˆ·æ–°æˆ–è€…ä»è¯¦æƒ…ä¹Ÿè¿›æ¥ï¼Œå°±è¦æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œé˜²æ­¢æ‰§è¡Œé”€æ¯æ–¹æ³•å¯¼è‡´ä¸èƒ½ç¼“å­˜</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token keyword">from</span><span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'table-detail'</span> <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'table-list'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> isRefresh <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'isRefresh'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isRefresh <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">// è¿™é‡Œå¿…é¡»æ˜¯å¼‚æ­¥çš„ï¼Œä¸ç„¶ä¸èƒ½è·³è½¬</span>
        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'isRefresh'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'isRefresh'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'table-list'</span> <span class="token operator">&amp;&amp;</span> to<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'table-detail'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'isRefresh'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'isRefresh'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>æˆ‘ä¸çŸ¥é“è°·æ­Œå‡ºæ¥çš„è§£å†³æ–¹æ¡ˆä¸ºä»€ä¹ˆéƒ½åœ¨è¯¦æƒ…é¡µåˆ·æ–°ï¼Œè¿™æ ·çš„é—®é¢˜å°±æ˜¯ç”¨æˆ·ç¬¬ä¸€æ¬¡è·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œå†å›åˆ°åˆ—è¡¨é¡µæ˜¯æ²¡æœ‰ç¼“å­˜çš„åŠŸèƒ½ï¼Œç¬¬äºŒæ¬¡å°±ä¼šæ­£å¸¸ï¼Œä½†æ˜¯å®¢æˆ·å¾ˆå¯èƒ½å°±ä¼šæ‰§è¡Œè¿™ä¸€æ¬¡æ“ä½œï¼›</p> <p>è¿™ç§è§£å†³æ–¹å¼å¤ªè¿‡åŸå§‹ï¼Œç”¨æˆ·ä½“éªŒå¤ªå·®ï¼Œè€Œä¸”éœ€è¦ç¼“å­˜å¤šä¸ªé¡µé¢å°±ä¸å¤ªå¥½æ§åˆ¶ï¼Œä¸å»ºè®®ç”¨è¿™ä¸ªæ–¹æ³•</p> <h3 id="å®ç°æ–¹å¼äºŒ"><a href="#å®ç°æ–¹å¼äºŒ" class="header-anchor">#</a> å®ç°æ–¹å¼äºŒ</h3> <p>çµæ„Ÿæ¥è‡ª<code>æ–¹å¼ä¸€</code>ï¼Œæˆ‘å¯ä»¥å…¶ä»–æ–¹å¼æ¨¡æ‹Ÿé¡µé¢åˆ·æ–°ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>è¿™é‡Œä¸€å®šè¦ä½¿ç”¨v<span class="token operator">-</span><span class="token keyword">if</span>ï¼Œå¥½å¤„æ˜¯ä½ å¯ä»¥ä½¿ç”¨$nextTickä½“éªŒæ›´å¥½ï¼Œå¦ä¸€æ–¹é¢æ˜¯åœ¨ä½¿ç”¨v<span class="token operator">-</span>showä¹‹åï¼Œä»–å°±ç›¸å½“äºéšè—äº†è¯¥é¡µé¢ï¼Œä½†æ˜¯å¦‚æœé‡Œé¢æœ‰ä¸€äº›ä¸ä¼šdiffçš„dom<span class="token punctuation">,</span>å°±ä¼šå±•ç¤ºå‡ºæ¥ï¼Œæ¨¡æ‹Ÿåˆ·æ–°çš„ä½“éªŒå°±ä¸å¤ªå¥½ã€‚ä¾‹å¦‚ä½¿ç”¨ input<span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;isRouterAlive&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>ddd<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;ddd&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>table<span class="token operator">-</span>list ref<span class="token operator">=</span><span class="token string">&quot;table&quot;</span> <span class="token operator">:</span>multiple<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token operator">:</span>otherTableParams<span class="token operator">=</span><span class="token string">&quot;otherTableParams&quot;</span> <span class="token operator">:</span>tableColumn<span class="token operator">=</span><span class="token string">&quot;column&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…¶ä»–ä»£ç  ........</span>
    <span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isRefresh<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¦‚æœä¸æ˜¯è·³è½¬åˆ°è¯¦æƒ…é¡µ</span>
        <span class="token keyword">const</span> resetData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è·å–åŸæ¥dataçš„æ•°æ®</span>
        <span class="token keyword">delete</span> resetData<span class="token punctuation">.</span>column  <span class="token comment">// æˆ‘åœ¨è¿™é‡Œæ“ä½œçš„åŸå› æ˜¯å› ä¸ºï¼Œæˆ‘é€šè¿‡ä¸Šé¢è·å–çš„æ•°æ®é‡Œé¢ï¼Œç”¨åˆ°å‡½æ•°è¿”å›çš„å½¢å¼ï¼Œå±•ç¤ºä¸ºundefined  {cb: this.jumpEdit} å±•ç¤ºä¸º {cb: this.undefined},å…·ä½“åŸå› æœªçŸ¥</span>

        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">,</span> resetData<span class="token punctuation">)</span> <span class="token comment">// é‡ç½®data</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isRouterAlive <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// é€šè¿‡v-ifä¸å±•ç¤ºå½“å‰é¡µé¢ </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
          window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// é¡µé¢ç½®é¡¶ï¼Œä¸è¦å†ä¸‹é¢çš„å®šæ—¶å™¨é‡Œé¢ä½¿ç”¨ï¼Œæœ‰é¡¿æŒ«æ„Ÿ</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>isRouterAlive <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// é€šè¿‡v-ifå±•ç¤ºå½“å‰é¡µé¢ </span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¼‚æ­¥è·å–æ•°æ®ï¼Œè·Ÿæˆ‘çš„é¡¹ç›®ç»„ä»¶æœ‰å…³ï¼Œä½ ä»¬å¯ä»¥ç›´æ¥åœ¨ä¸Šé¢è·å–å°±OK</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ¤æ–­å¦‚æœä¸æ˜¯è¿›è¯¦æƒ…é¡µï¼Œå±•ç¤ºä¸ºtrue æ˜¯é¡µé¢é‡æ–°åŠ è½½çš„æ„æ€</span>
      <span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isRefresh <span class="token operator">=</span> to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'table-detail'</span><span class="token punctuation">;</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ä¸æ·»åŠ è·¯ç”±ä¸ä¼šè·³è½¬</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><strong>ä¼˜åŒ–</strong>
ç°åœ¨çš„ä»£ç æœ‰ä¸¤ä¸ªé—®é¢˜
<code>ä¸€</code>æ˜¯ä»è¯¦æƒ…é¡µåˆ°åˆ—è¡¨é¡µï¼Œæ•°æ®ä¸ä¼šæ›´æ–°ï¼Œå¦‚æœæˆ‘åœ¨è¯¦æƒ…é¡µä¿®æ”¹äº†æŸä¸ªæ•°æ®ï¼Œç„¶åå†åˆ°åˆ—è¡¨é¡µå°±ä¼šæ»å;
<code>äºŒ</code>æ˜¯ä»è¯¦æƒ…é¡µè·³è½¬åˆ°åˆ«çš„åˆ—è¡¨é¡µç„¶ååœ¨è·³è½¬åˆ°ç¼“å­˜çš„åˆ—è¡¨é¡µï¼Œç„¶åä»–è¿˜æ˜¯ä¼šç¼“å­˜ä¹‹å‰çš„æ•°æ®ï¼Œä¸ä¼šæ›´æ–°å½“å‰é¡µé¢;</p> <p>ä¼˜åŒ–å¦‚ä¸‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›æ¥ä¸æ‰§è¡Œä¸‹é¢çš„æ–¹æ³•ï¼Œå¦åˆ™ä¼šè¯·æ±‚ä¸¤æ¬¡æ•°æ®</span>
 <span class="token comment">// this.hasFirst ä¸ç”¨ç”Ÿæˆå“åº”å¼çš„ï¼Œç›´æ¥ä¸€ä¸ªå˜é‡å°±å¥½</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasFirst<span class="token punctuation">)</span> <span class="token keyword">return</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isRefresh<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">delete</span> data<span class="token punctuation">.</span>column

    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isRouterAlive <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isRouterAlive <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isRefresh <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// this.$route.meta.isRefreshåœ¨è·¯ç”±é‡Œé¢æˆ‘å¹¶æ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤æ˜¯undefinedï¼Œå½“ä»–ä¸ºfalseçš„æ—¶å€™ï¼Œè¯´æ˜ä»–ä»åˆ«çš„é¡µé¢è¿›æ¥äº†ï¼Œè¿™ä¸ªæ—¶å€™è®©ä»–è¯·æ±‚ä¸‹æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// è¿™ä¸ªè·¯ç”±å®ˆå«å‡½æ•°å¼æœ€å…ˆæ‰§è¡Œçš„</span>
 to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isRefresh <span class="token operator">=</span> <span class="token keyword">from</span><span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token keyword">from</span><span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'table-detail'</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ä¸‹é¢ä»£ç æ³¨é‡Šå³å¯</span>
<span class="token comment">// beforeRouteLeave(to, from, next) {</span>
<span class="token comment">//   from.meta.isRefresh = to.name !== 'table-detail';</span>
<span class="token comment">//   next()</span>
<span class="token comment">// }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>æœ€åå¯ä»¥æŠŠè¿™äº›ä»£ç æŠ½ç¦»æˆä¸€ä¸ª<code>mixins</code>,ç„¶åç¼–å†™ä¸€ä¸ªåˆ·æ–°çš„ç»„ä»¶ï¼Œå“ªé‡Œç”¨åœ¨å“ªé‡Œè°ƒå–ä¸‹,<a href="/2020/06/15/workspace/Frame/vue/reload/">ä¹Ÿå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« </a>ã€‚</p> <h3 id="å®ç°æ–¹å¼ä¸‰"><a href="#å®ç°æ–¹å¼ä¸‰" class="header-anchor">#</a> å®ç°æ–¹å¼ä¸‰</h3> <p>è¿™ç§ç”¨ <code>keep-alive</code> æä¾›çš„ <code>include</code> å’Œ <code>exclude</code>,ç„¶åé…åˆvuexå®ç°åŠ¨æ€æ§åˆ¶ã€‚</p> <p><strong>è·¯ç”±å…¥å£é¡µé¢</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// app.vue</span>
<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive <span class="token operator">:</span>include<span class="token operator">=</span><span class="token string">'includes'</span> <span class="token operator">:</span>exclude<span class="token operator">=</span><span class="token string">''</span><span class="token operator">:</span>max<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å…¶ä¸­<code>include</code>ä»£è¡¨ç€è¦ç¼“å­˜çš„ï¼Œ<code>exclude</code>ä»£è¡¨ç€éç¼“å­˜çš„,<code>max</code>ä»£è¡¨æœ€å¤šç¼“å­˜çš„ä¸ªæ•°ã€‚</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·å–vuexçš„æ•°æ®</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapGetters<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">// åœ¨computedä¸­åŠ¨æ€ç›‘æ§</span>
     <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'includes'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token function">changeStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// æ”¹å˜vueçš„æ•°æ®ï¼Œåœ¨è¿™ç”¨ä¸åˆ°</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token string">'tableLists'</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>Vuex</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> keepalive <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    includes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'tableLists'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>includes <span class="token operator">=</span> payload
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">includes</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>includes
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> keepalive
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>åˆ—è¡¨é¡µçš„éƒ¨åˆ†ä»£ç </strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åŒä¸Šï¼Œå¦‚æœç¬¬ä¸€æ¬¡è¿›æ¥ï¼Œä¸æ‰§è¡Œä¸‹é¢çš„æ–¹æ³•</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasFirst<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queryList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™ä¸ªæ—¶å€™è¿˜æœ‰æ²¡this,æ‰€ä»¥è¿™é‡Œç”¨thisçš„è¯æ˜¯ä¸èƒ½æ“ä½œvuex,æˆ‘æ˜¯åœ¨main.jsé‡Œé¢èµ‹å€¼ç»™äº†window</span>
  window<span class="token punctuation">.</span>_store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'tableLists'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// ä¹Ÿå¯ä»¥è¿™ä¹ˆç”¨</span>
  <span class="token comment">// next((el) =&gt; {</span>
  <span class="token comment">//  el.$store.commit('change', ['tableLists']);</span>
  <span class="token comment">// })</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™é‡Œå¯ä»¥ç»Ÿä¸€åœ¨ scrollBehavior å¤„ç†å°±å¥½äº†ï¼ˆå»ºè®®åœ¨è¿™é‡Œæ·»åŠ  = å‚è€ƒä¸‹é¢ï¼‰</span>
  <span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span> 
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'table-detail'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœä¸æ˜¯è·³è½¬åˆ°è¯¦æƒ…é¡µé¢ï¼Œå°±ç©¿ä¸ªç©ºæ•°ç»„ï¼Œè¿™é‡Œä¸èƒ½ç”¨ '' é»˜è®¤æ˜¯æ‰€æœ‰çš„éƒ½ç¼“å­˜</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>è¯¦æƒ…é¡µçš„éƒ¨åˆ†ä»£ç </strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'table-list'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>è·¯ç”±é¡µé¢</strong></p> <p>å› ä¸ºincludesæ²¡æœ‰åœ¨è·¯ç”±é‡Œé¢å®šä¹‰ keepalive,æ‰€ä»¥ä¸Šé¢çš„<code>scrollBehavior</code>è¿™ä¸ªæ–¹æ³•å½“ä½¿ç”¨åˆæˆäº‹ä»¶è·³è½¬çš„æ—¶å€™ï¼Œéœ€è¦åšé¢å¤–çš„å¤„ç†</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Invest'</span><span class="token punctuation">,</span> <span class="token string">'Store'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// è¿™é‡Œéœ€è¦ç¼“å­˜çš„é¡µé¢çš„routeçš„name   ä¸æ˜¯vueç±»çš„name</span>
    <span class="token comment">// è¿™é‡Œåˆ—è¡¨é¡µè·³è½¬åˆ°åˆ«çš„é¡µé¢ï¼Œä¹Ÿä¼šä¿ç•™é¡µé¢çš„æ»šåŠ¨é«˜åº¦ä½†æ˜¯å¹¶æ²¡æœ‰ç¼“å­˜å½“å‰çš„é¡µé¢ï¼Œæ‰€ä»¥å½“é¡µé¢å†æ¬¡è¿”å›çš„æ—¶å€™ä¼šé‡æ–°åŠ è½½å½“å‰é¡µé¢</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ary<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* æœ€è¿‘ä¸€æ¬¡å›é¡¾çš„æ—¶å€™ å‘ç°äº†ä¸€ä¸ªé—®é¢˜
       * å¦‚æœæ˜¯åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œè¿™ä¸ªæ—¶å€™æ—¶å€™å…¶å®å·²ç»åˆ°äº†è¯¦æƒ…é¡µé¢ï¼Œ
       * å¦‚æœå½“å½“å‰è¯¦æƒ…é¡µçš„é¡µé¢çš„é«˜åº¦æ²¡æœ‰åˆ—è¡¨é¡µé¢è·³è½¬è¿›æ¥æ—¶æ»šåŠ¨çš„é«˜åº¦é«˜çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè·å–ä¸çœŸæ­£çš„é¡µé¢é«˜åº¦ï¼Œç„¶ååˆæˆäº‹ä»¶å›é€€çš„æ—¶å€™å°±ä¼šæ»šåŠ¨ä¸åˆ°è·³è½¬å‰çš„ä½ç½®
       * è§£å†³çš„åŠæ³•å°±æ˜¯åœ¨æ¯ä¸ªé¡µé¢ç¦»å¼€å‰ï¼Œè·å–åˆ°é¡µé¢çš„é«˜åº¦ï¼Œå­˜åˆ°çš„metaä¸Šï¼Œè¿™æ ·æ—¢èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿèƒ½ç»“å±€æŠŠä¸æ˜¯bodyæ»šåŠ¨çš„æƒ…å†µè·å–ä¸åˆ°æ»šåŠ¨é«˜åº¦çš„é—®é¢˜ã€‚
      */</span>
      <span class="token keyword">from</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">}</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¸Šé¢çš„ä»£ç æ¯”è¾ƒçç¢ï¼Œéœ€è¦æ·»åŠ åˆ°æ¯ä¸€ä¸ªé¡µé¢ï¼Œæ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­å¤§å®¶å¯æ·»åŠ ä¸€ä¸ªkeepaliveçš„mixins,æ–¹ä¾¿å¤§å®¶ç®¡ç†ã€‚</p> <p><strong>ä½¿ç”¨includeå’Œexcludeçš„æ³¨æ„ç‚¹ï¼š</strong></p> <ol><li>æ¯ä¸ªç»„ä»¶å†…éƒ¨æ·»åŠ  {name:xx}</li> <li>è‹¥å°†includeè®¾ç½®ç©º ' ' æ¯ä¸ªé¡µé¢éƒ½å°†ä¼šç¼“å­˜</li> <li>excludeçš„ä¼˜å…ˆçº§é«˜äºinclude ä½¿ç”¨excludeå</li></ol> <hr> <blockquote><p>äººç”Ÿä¸­ç¬¬ä¸€æ¬¡å‘å¸ƒæ–‡ç« ï¼Œå¸Œæœ›å¤§ä½¬ä»¬å¤šå¤šæŒ‡æ•™ï¼Œ</p></blockquote> <hr> <h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="header-anchor">#</a> å‚è€ƒæ–‡æ¡£</h2> <p><a href="https://github.com/vuejs/vue/blob/dev/src/core/components/keep-alive.js" target="_blank" rel="noopener noreferrer">keep-alive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/vuejs/vue-router/issues/811" target="_blank" rel="noopener noreferrer">vueRouterIssues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/vuejs/vue-router/blob/dev/src/util/scroll.js#L10:1" target="_blank" rel="noopener noreferrer">scrollBehavior<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB" target="_blank" rel="noopener noreferrer">å¯¼èˆªå®ˆå«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/hzfvictory/file/edit/devlop/docs/workspace/Frame/vue/keep-alive.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/workspace/Frame/vue/prerender.html" class="prev">
        Vueé¢„æ¸²æŸ“
      </a></span> <span class="next"><a href="/workspace/Frame/vue/table-jsx.html">
        vueä¹‹JSXå°è£…table
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.0eaa2b4b.js" defer></script><script src="/assets/js/2.4ad1b535.js" defer></script><script src="/assets/js/53.fd7c5cdb.js" defer></script>
  </body>
</html>
