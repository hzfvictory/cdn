(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{470:function(s,t,a){"use strict";a.r(t);var n=a(24),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("strong",{staticClass:"old-blog"},[s._v("shell & ssh")])]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#日常用到的shell命令"}},[s._v("日常用到的Shell命令")])]),a("li",[a("a",{attrs:{href:"#添加环境变量"}},[s._v("添加环境变量")])]),a("li",[a("a",{attrs:{href:"#vim"}},[s._v("VIM")])]),a("li",[a("a",{attrs:{href:"#shell编程"}},[s._v("Shell编程")])]),a("li",[a("a",{attrs:{href:"#针对jenkins总结的"}},[s._v("针对jenkins总结的")])]),a("li",[a("a",{attrs:{href:"#ssh-不能登录服务器"}},[s._v("ssh 不能登录服务器")])]),a("li",[a("a",{attrs:{href:"#关于sshpass使用举例"}},[s._v("关于sshpass使用举例")])]),a("li",[a("a",{attrs:{href:"#脚本"}},[s._v("脚本")])])])]),a("p"),s._v(" "),a("h3",{attrs:{id:"日常用到的shell命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日常用到的shell命令"}},[s._v("#")]),s._v(" 日常用到的Shell命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令名")]),s._v(" "),a("th",[s._v("功能描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("clear")]),s._v(" "),a("td",[s._v("清除屏幕或窗口内容")])]),s._v(" "),a("tr",[a("td",[s._v("env")]),s._v(" "),a("td",[s._v("显示当前所有设置过的环境变量")])]),s._v(" "),a("tr",[a("td",[s._v("date")]),s._v(" "),a("td",[s._v("显示系统的当前日期和时间")])]),s._v(" "),a("tr",[a("td",[s._v("cal")]),s._v(" "),a("td",[s._v("显示日历")])]),s._v(" "),a("tr",[a("td",[s._v("vi 修改文件")]),s._v(" "),a("td",[s._v("dd删除一行 A编辑选中的最后一行代码 ，")])]),s._v(" "),a("tr",[a("td",[s._v(":set nu")]),s._v(" "),a("td",[s._v("加索引")])]),s._v(" "),a("tr",[a("td",[s._v("touch")]),s._v(" "),a("td",[s._v("创建文件")])]),s._v(" "),a("tr",[a("td",[s._v("mkdir")]),s._v(" "),a("td",[s._v("创建文件夹")])]),s._v(" "),a("tr",[a("td",[s._v("du -ha [文件名称]")]),s._v(" "),a("td",[s._v("查看目录/文件占用空间大小")])]),s._v(" "),a("tr",[a("td",[s._v("ls -lh")]),s._v(" "),a("td",[s._v("看文件大小")])]),s._v(" "),a("tr",[a("td",[s._v("ll")]),s._v(" "),a("td",[s._v("等价 ls -al")])]),s._v(" "),a("tr",[a("td",[s._v("netstat -nltp")]),s._v(" "),a("td",[s._v("grep 443")])]),s._v(" "),a("tr",[a("td",[s._v("mv")]),s._v(" "),a("td",[s._v("修改文件名 移动文件 mv  index.html  .bash_profile")])]),s._v(" "),a("tr",[a("td",[s._v("cat")]),s._v(" "),a("td",[s._v("查看内容")])]),s._v(" "),a("tr",[a("td",[s._v("sudo vim /etc/hosts")]),s._v(" "),a("td",[s._v("ws破解")])]),s._v(" "),a("tr",[a("td",[s._v("ssh -p 2289 root@182.92.117.162")]),s._v(" "),a("td",[s._v("登录ssh")])]),s._v(" "),a("tr",[a("td",[s._v("chattr +i .user.ini")]),s._v(" "),a("td",[s._v("重新恢复文件不可更动属性")])]),s._v(" "),a("tr",[a("td",[s._v("chmod -R 777 pet_07")]),s._v(" "),a("td",[s._v("赋权限")])]),s._v(" "),a("tr",[a("td",[s._v("r：可读"),a("br"),s._v("w：可写"),a("br"),s._v("x：可执行"),a("br"),a("br"),s._v("-rw------- (600) -- 只有属主有读写权限。"),a("br"),s._v("-rw-r--r-- (644) -- 只有属主有读写权限；而属组用户和其他用户只有读权限。"),a("br"),s._v("-rwx------ (700) -- 只有属主有读、写、执行权限。"),a("br"),a("strong",[s._v("-rwxr-xr-x (755) -- 属主有读、写、执行权限；别的用户组只有读、执行权限。")]),a("br"),s._v("-rwx--x--x (711) -- 属主有读、写、执行权限；而属组用户和其他用户只有执行权限。"),a("br"),s._v("-rw-rw-rw- (666) -- 所有用户都有文件读、写权限。这种做法不可取。"),a("br"),s._v("-rwxrwxrwx (777) -- 所有用户都有读、写、执行权限。更不可取的做法。"),a("br")]),s._v(" "),a("td",[s._v("参数解释")])]),s._v(" "),a("tr",[a("td",[s._v("sudo chown -R $(whoami) or【你的用户名】  /Users/hzf/Desktop/projectSvelte")]),s._v(" "),a("td",[s._v("更改某个目录或文件的用户名和用户组")])]),s._v(" "),a("tr",[a("td",[s._v("yarn version --new-version 1.0.0")]),s._v(" "),a("td",[s._v("更改版本号")])]),s._v(" "),a("tr",[a("td",[s._v("curl http://www.jing999.cn:8000/banner")]),s._v(" "),a("td",[s._v("http命令行工具")])]),s._v(" "),a("tr",[a("td",[s._v("ping www.jing999.cn")]),s._v(" "),a("td",[s._v("ping")])]),s._v(" "),a("tr",[a("td",[s._v("kill -9 PID")]),s._v(" "),a("td",[s._v("杀死这个进程")])]),s._v(" "),a("tr",[a("td",[s._v("npx browser-sync start -s . -f .")]),s._v(" "),a("td",[s._v("静态页面动态刷新")])]),s._v(" "),a("tr",[a("td",[s._v("browser-sync start --server --files .")]),s._v(" "),a("td",[s._v("静态页面动态刷新")])]),s._v(" "),a("tr",[a("td",[s._v("rm -rf node_modules/.cache/babel-loader")]),s._v(" "),a("td",[s._v("umi的bug")])]),s._v(" "),a("tr",[a("td",[s._v("nginx -s reload")]),s._v(" "),a("td",[s._v("重启nginx")])]),s._v(" "),a("tr",[a("td",[s._v("tar -czvf dist.tar.gz dist")]),s._v(" "),a("td",[s._v("dist 压缩")])]),s._v(" "),a("tr",[a("td",[s._v("tar -xzvf dist.tar.gz")]),s._v(" "),a("td",[s._v("解压")])]),s._v(" "),a("tr",[a("td",[s._v("-c: 建立压缩档案"),a("br"),s._v("-x：解压"),a("br"),s._v("-z：有gzip属性的"),a("br"),s._v("-v：显示所有过程"),a("br"),s._v("-r：向压缩归档文件末尾追加文件"),a("br"),s._v("-f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。"),a("br")]),s._v(" "),a("td",[s._v("参数解释")])]),s._v(" "),a("tr",[a("td",[s._v("find / -name jenkins")]),s._v(" "),a("td",[s._v("查看安装目录")])]),s._v(" "),a("tr",[a("td",[s._v('find . "(" -name "'),a("em",[s._v('.m" -or -name "')]),s._v('.mm" '),a("br"),s._v(' -or -name "'),a("em",[s._v('.jsx" -or -name "')]),s._v('.tsx" '),a("br"),s._v(' -or -name "'),a("em",[s._v('.css" -or -name "')]),s._v('.less" '),a("br"),s._v(' -or -name "'),a("em",[s._v('.scss" -or -name "')]),s._v('.js" '),a("br"),s._v(' -or -name "'),a("em",[s._v('.ts" -or -name "')]),s._v('.rss" ")" -print | xargs wc -l')]),s._v(" "),a("td",[s._v("看一共写了多少行的代码")])]),s._v(" "),a("tr",[a("td",[s._v("sed -i '' \"s/666/777/g\" config")]),s._v(" "),a("td",[s._v("修改文字 666换成777")])])])]),s._v(" "),a("h3",{attrs:{id:"添加环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加环境变量"}},[s._v("#")]),s._v(" 添加环境变量")]),s._v(" "),a("ul",[a("li",[s._v("临时有效\n"),a("ul",[a("li",[s._v("export PATH=$(pwd)/bin:$PATH")])])]),s._v(" "),a("li",[s._v("软连接  /usr/local/bin/就是环境变量目录\n"),a("ul",[a("li",[s._v("ln -s /usr/local/nginx/sbin/nginx /usr/local/bin/")])])]),s._v(" "),a("li",[s._v("用户主目录下的.bashrc 或.profile文件（推荐）\n"),a("ul",[a("li",[s._v("export PATH=/Users/hzf/mongodb/bin:$PATH\n"),a("ul",[a("li",[s._v("执行source ~/.bashrc, 立即生效")])])])])])]),s._v(" "),a("h3",{attrs:{id:"vim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vim"}},[s._v("#")]),s._v(" VIM")]),s._v(" "),a("p",[a("strong",[s._v("批量注释")])]),s._v(" "),a("p",[s._v("从需要被注释的第一行开始，将光标移动到行首，")]),s._v(" "),a("p",[s._v("按下  "),a("code",[s._v("Ctrl + v")])]),s._v(" "),a("p",[s._v("接着按下"),a("code",[s._v("方向键")]),s._v("下，一直移动到需要被注释的最后一行，")]),s._v(" "),a("p",[s._v("这时可以看到，这些需要被注释的行的行首第一个字符已经全部被选中")]),s._v(" "),a("p",[s._v("然后按下  "),a("code",[s._v("Shift + i")]),s._v("，批量插入，")]),s._v(" "),a("p",[s._v("这时光标会跳到第一行的行首，不用管，继续按下"),a("code",[s._v("Shift + 3")]),s._v("，也就是  "),a("code",[s._v("#")]),s._v("键")]),s._v(" "),a("p",[s._v("最后按下  "),a("code",[s._v("Esc")]),s._v(" 键，就可以看到刚才被选中的行的行首都会加多一个"),a("code",[s._v("#")]),s._v("号")]),s._v(" "),a("p",[s._v("批量注释完毕")]),s._v(" "),a("p",[a("strong",[s._v("去注释")])]),s._v(" "),a("p",[s._v("对于一大段被注释的代码，需要去掉注释的时候，也可以一次性操作完")]),s._v(" "),a("p",[s._v("不用一个一个去删，具体操作如下：")]),s._v(" "),a("p",[s._v("光标移到需要去除注释的第一行的行首，跟上面的一样，")]),s._v(" "),a("p",[s._v("按下 ·"),a("code",[s._v("Ctrl + v")])]),s._v(" "),a("p",[s._v("接着按下"),a("code",[s._v("方向键")]),s._v("下，一直移动到需要被注释的最后一行，")]),s._v(" "),a("p",[s._v("这时候可以看到，行首的第一个字符"),a("code",[s._v("#")]),s._v("已经被选中了，")]),s._v(" "),a("p",[s._v("然后按下"),a("code",[s._v("d")]),s._v("键就可以全部删掉行首的"),a("code",[s._v("#")]),s._v("字符了。")]),s._v(" "),a("h3",{attrs:{id:"shell编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell编程"}},[s._v("#")]),s._v(" Shell编程")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# run: sh depoly.sh 123 123")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 变量定义")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意赋值不需要空格")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 双引号可以直接写入变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${str}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("arr")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数组")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo打印")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" this is "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# this is test # 被默认为字符串，不会报错")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# test # 变量引用需要家$符号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# this is test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# this is test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2 # 数组切割")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# if判断")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# if条件需要在方括号中，并且注意需要空格")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'successed'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("b")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a 不等于 b"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 123 #第一个参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2 # 参数个数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 123 123 所有参数")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("h3",{attrs:{id:"针对jenkins总结的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对jenkins总结的"}},[s._v("#")]),s._v(" 针对jenkins总结的")]),s._v(" "),a("p",[a("code",[s._v("启动jenkins")]),a("br"),s._v("\njava -jar jenkins.war --httpPort=8081")]),s._v(" "),a("p",[a("code",[s._v("如果想要在linux后台一直运行，则要开始加nohup，在末尾加&号")]),a("br"),s._v("\nnohup java -jar jenkins.war --httpPort=8081 &")]),s._v(" "),a("p",[s._v("启动后 会生成一个nohup.out输出，需要的话，可以tail -f nohup.out实时查看日志")]),s._v(" "),a("p",[a("code",[s._v("列出jenkins的所有进程")]),a("br"),s._v("\nps -aux|grep jenkins")]),s._v(" "),a("p",[a("code",[s._v("杀死这个进程")]),a("br"),s._v("\nkill -9 [PID]")]),s._v(" "),a("p",[a("code",[s._v("启动jenkins的另外方式")]),a("br"),s._v("\nservice jenkins start/stop/restart/status")]),s._v(" "),a("p",[s._v("systemctl start jenkins.service")]),s._v(" "),a("p",[a("code",[s._v("查看运行的后台进程")]),a("br"),s._v("\njobs -l"),a("br"),s._v("\njobs命令只看当前终端生效的，关闭终端后，在另一个终端jobs已经无法看到后台跑得程序了，此时利用ps（进程查看命令）"),a("br"),s._v("\nps -ef"),a("br"),s._v("\nps -aux|grep jenkins")]),s._v(" "),a("p",[a("strong",[s._v("查看使用某端口的进程")]),a("br"),s._v(" "),a("code",[s._v("lsof -i:3000")]),s._v(" "),a("br"),s._v("\nkill -9  [pid]")]),s._v(" "),a("h3",{attrs:{id:"ssh-不能登录服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-不能登录服务器"}},[s._v("#")]),s._v(" ssh 不能登录服务器")]),s._v(" "),a("p",[s._v("提示警告信息如下：")]),s._v(" "),a("p",[s._v("arnold@WSN:~$ ssh 120.79.229.197")]),s._v(" "),a("p",[s._v("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!\nIt is also possible that the RSA host key has just been changed.\nThe fingerprint for the RSA key sent by the remote host is\n08:98:a9:cc:f8:37:20:6b:b4:b1:6c:3a:15:b9:a9:92.\nPlease contact your system administrator.\nAdd correct host key in /home/arnold/.ssh/known_hosts to get rid of this message.\nOffending key in /home/arnold/.ssh/known_hosts:2\nRSA host key for 10.18.46.111 has changed and you have requested strict checking.\nHost key verification failed.")]),s._v(" "),a("p",[s._v("原因分析：")]),s._v(" "),a("p",[s._v("It is also possible that a host key has just been changed.")]),s._v(" "),a("p",[s._v("我之前对ssh服务器重装了系统，导致所有与原系统建立过ssh连接的系统都无法再建立连接，因为在于原系统建立首次连接时，双方相互记录了对方的公钥（ssh基于非对称密钥技术），在ssh服务主机重装系统后，公钥改变了，任以旧版本公钥的主机自然是无法与新系统连接的。")]),s._v(" "),a("p",[s._v("网上还有分析为ssh主机被人黑了，并在消除入侵记录时对known_hosts文件做了改动。当然也不排除这种可能，但我估计我是没那个福气了：）")]),s._v(" "),a("p",[s._v("解决方案：")]),s._v(" "),a("p",[s._v("删除 "),a("code",[s._v("~/.ssh/known_hosts")]),s._v("文件，或者"),a("code",[s._v("如果你可以判断出known_hosts中原ssh服务器的公钥，删去那部分")]),s._v("，")]),s._v(" "),a("p",[s._v("然后后再次建立新的连接，即可获得新的公钥。")]),s._v(" "),a("h3",{attrs:{id:"关于sshpass使用举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于sshpass使用举例"}},[s._v("#")]),s._v(" 关于sshpass使用举例")]),s._v(" "),a("p",[a("code",[s._v("使用-p参数指定登录密码")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 免密码登录\n$ sshpass -p password ssh username@host\n\n# 远程执行命令\n$ sshpass -p password ssh username@host <cmd>\n\n# 通过scp上传文件\n$ sshpass -p password scp local_file root@host:remote_file \n\n# 通过scp下载文件\n$ sshpass -p password scp root@host:remote_file local_file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("示例：")]),s._v(" "),a("div",{staticClass:"language-linux line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#把本地的source.txt文件拷贝到192.168.0.10机器上的/home/work目录下\nscp /home/work/source.txt root@192.168.0.10:/home/work/ \n\n#把120.79.229.197机器上的hzf.gif文件拷贝到本地的/Users/zhenfeng/tempData/目录下\nscp root@120.79.229.197:/tmp/hzf.gif /Users/zhenfeng/tempData/  \n\n#把192.168.0.10机器上的source.txt文件拷贝到192.168.0.11机器的/home/work目录下\nscp root@192.168.0.10:/home/work/source.txt root@192.168.0.11:/home/work/ \n\n#拷贝文件夹，加-r参数\nscp -r /home/work/sourcedir root@192.168.0.10:/home/work/ \n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚本"}},[s._v("#")]),s._v(" 脚本")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/usr/bin/env bash\ntar -czvf '$1' | sshpass -p password ssh root@host 'cd /home -rf;tar -xzvf -'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("code",[s._v("脚本用env启动的原因，是因为脚本解释器在linux中可能被安装于不同的目录，env可以在系统的PATH目录中查找。同时，env还规定一些系统环境变量。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);